[
    {
        "additional_types": [
            {
                "name": "Invite3pid",
                "properties": [
                    {
                        "description": "The hostname+port of the identity server which should be used for third party identifier lookups.",
                        "name": "id_server",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.",
                        "name": "id_access_token",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "The kind of address being passed in the address field, for example ``email``.",
                        "name": "medium",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "The invitee's third party identifier.",
                        "name": "address",
                        "required": true,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "CreationContent",
                "properties": []
            },
            {
                "name": "StateEvent",
                "properties": [
                    {
                        "description": "The type of event to send.",
                        "name": "type",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "The state_key of the state event. Defaults to an empty string.",
                        "name": "state_key",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The content of the event.",
                        "name": "content",
                        "required": true,
                        "type": "object"
                    }
                ]
            },
            {
                "name": "Power Level Event Content",
                "properties": []
            }
        ],
        "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "description": "Create a new room with various configuration options.\n\nThe server MUST apply the normal state resolution rules when creating\nthe new room, including checking power levels for each event. It MUST\napply the events implied by the request in the following order:\n\n1. The ``m.room.create`` event itself. Must be the first event in the\n   room.\n\n2. An ``m.room.member`` event for the creator to join the room. This is\n   needed so the remaining events can be sent.\n\n3. A default ``m.room.power_levels`` event, giving the room creator\n   (and not other members) permission to send state events. Overridden\n   by the ``power_level_content_override`` parameter.\n\n4. Events set by the ``preset``. Currently these are the ``m.room.join_rules``,\n   ``m.room.history_visibility``, and ``m.room.guest_access`` state events.\n\n5. Events listed in ``initial_state``, in the order that they are\n   listed.\n\n6. Events implied by ``name`` and ``topic`` (``m.room.name`` and ``m.room.topic``\n   state events).\n\n7. Invite events implied by ``invite`` and ``invite_3pid`` (``m.room.member`` with\n   ``membership: invite`` and ``m.room.third_party_invite``).\n\nThe available presets do the following with respect to room state:\n\n========================  ==============  ======================  ================  =========\n         Preset           ``join_rules``  ``history_visibility``  ``guest_access``  Other\n========================  ==============  ======================  ================  =========\n``private_chat``          ``invite``      ``shared``              ``can_join``\n``trusted_private_chat``  ``invite``      ``shared``              ``can_join``      All invitees are given the same power level as the room creator.\n``public_chat``           ``public``      ``shared``              ``forbidden``\n========================  ==============  ======================  ================  =========\n\nThe server will create a ``m.room.create`` event in the room with the\nrequesting user as the creator, alongside other keys provided in the\n``creation_content``.",
        "method": "POST",
        "parameters": {
            "Body": [
                {
                    "description": "A ``public`` visibility indicates that the room will be shown\nin the published room list. A ``private`` visibility will hide\nthe room from the published room list. Rooms default to\n``private`` visibility if this key is not included. NB: This\nshould not be confused with ``join_rules`` which also uses the\nword ``public``.",
                    "name": "visibility",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "The desired room alias **local part**. If this is included, a\nroom alias will be created and mapped to the newly created\nroom. The alias will belong on the *same* homeserver which\ncreated the room. For example, if this was set to \"foo\" and\nsent to the homeserver \"example.com\" the complete room alias\nwould be ``#foo:example.com``.\n\nThe complete room alias will become the canonical alias for\nthe room.",
                    "name": "room_alias_name",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "If this is included, an ``m.room.name`` event will be sent\ninto the room to indicate the name of the room. See Room\nEvents for more information on ``m.room.name``.",
                    "name": "name",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "If this is included, an ``m.room.topic`` event will be sent\ninto the room to indicate the topic for the room. See Room\nEvents for more information on ``m.room.topic``.",
                    "name": "topic",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "A list of user IDs to invite to the room. This will tell the\nserver to invite everyone in the list to the newly created room.",
                    "name": "invite",
                    "required": false,
                    "type": "[string]"
                },
                {
                    "description": "A list of objects representing third party IDs to invite into\nthe room.",
                    "name": "invite_3pid",
                    "required": false,
                    "type": "[Invite3pid]"
                },
                {
                    "description": "The room version to set for the room. If not provided, the homeserver is\nto use its configured default. If provided, the homeserver will return a\n400 error with the errcode ``M_UNSUPPORTED_ROOM_VERSION`` if it does not\nsupport the room version.",
                    "name": "room_version",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "Extra keys, such as ``m.federate``, to be added to the content\nof the `m.room.create`_ event. The server will clobber the following\nkeys: ``creator``, ``room_version``. Future versions of the specification\nmay allow the server to clobber other keys.",
                    "name": "creation_content",
                    "required": false,
                    "type": "CreationContent"
                },
                {
                    "description": "A list of state events to set in the new room. This allows\nthe user to override the default state events set in the new\nroom. The expected format of the state events are an object\nwith type, state_key and content keys set.\n\nTakes precedence over events set by ``preset``, but gets\noverriden by ``name`` and ``topic`` keys.",
                    "name": "initial_state",
                    "required": false,
                    "type": "[StateEvent]"
                },
                {
                    "description": "Convenience parameter for setting various default state events\nbased on a preset.\n\nIf unspecified, the server should use the ``visibility`` to determine\nwhich preset to use. A visbility of ``public`` equates to a preset of\n``public_chat`` and ``private`` visibility equates to a preset of\n``private_chat``.",
                    "name": "preset",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "This flag makes the server set the ``is_direct`` flag on the\n``m.room.member`` events sent to the users in ``invite`` and\n``invite_3pid``. See `Direct Messaging`_ for more information.",
                    "name": "is_direct",
                    "required": false,
                    "type": "boolean"
                },
                {
                    "description": "The power level content to override in the default power level\nevent. This object is applied on top of the generated `m.room.power_levels`_\nevent content prior to it being sent to the room. Defaults to\noverriding nothing.",
                    "name": "power_level_content_override",
                    "required": false,
                    "type": "Power Level Event Content"
                }
            ]
        },
        "path": "/createRoom",
        "rate_limited": false,
        "requires_auth": true,
        "responses": [
            {
                "description": "Information about the newly created room.",
                "examples": {
                    "application/json": {
                        "room_id": "!sefiuhWgwghwWgh:example.com"
                    }
                },
                "parameters": [
                    {
                        "description": "The created room's ID.",
                        "name": "room_id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "required": false,
                "status": 200
            },
            {
                "description": "\nThe request is invalid. A meaningful ``errcode`` and description\nerror text will be returned. Example reasons for rejection include:\n\n- The request body is malformed (``errcode`` set to ``M_BAD_JSON``\n  or ``M_NOT_JSON``).\n\n- The room alias specified is already taken (``errcode`` set to\n  ``M_ROOM_IN_USE``).\n\n- The initial state implied by the parameters to the request is\n  invalid: for example, the user's ``power_level`` is set below\n  that necessary to set the room name (``errcode`` set to\n  ``M_INVALID_ROOM_STATE``).\n\n- The homeserver doesn't support the requested room version, or\n  one or more users being invited to the new room are residents\n  of a homeserver which does not support the requested room version.\n  The ``errcode`` will be ``M_UNSUPPORTED_ROOM_VERSION`` in these\n  cases.",
                "examples": "",
                "parameters": [
                    {
                        "description": "An error code.",
                        "name": "errcode",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "A human-readable error message.",
                        "name": "error",
                        "required": false,
                        "type": "string"
                    }
                ],
                "required": false,
                "status": 400
            }
        ],
        "summary": "Create a new room"
    }
]