[
    {
        "additional_types": [
            {
                "name": "Filter",
                "properties": [
                    {
                        "description": "The maximum number of events to return.",
                        "name": "limit",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "description": "A list of sender IDs to exclude. If this list is absent then no senders are excluded. A matching sender will be excluded even if it is listed in the ``'senders'`` filter.",
                        "name": "not_senders",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "A list of event types to exclude. If this list is absent then no event types are excluded. A matching type will be excluded even if it is listed in the ``'types'`` filter. A '*' can be used as a wildcard to match any sequence of characters.",
                        "name": "not_types",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "A list of senders IDs to include. If this list is absent then all senders are included.",
                        "name": "senders",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "A list of event types to include. If this list is absent then all event types are included. A ``'*'`` can be used as a wildcard to match any sequence of characters.",
                        "name": "types",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "If ``true``, enables lazy-loading of membership events. See\n`Lazy-loading room members <#lazy-loading-room-members>`_\nfor more information. Defaults to ``false``.",
                        "name": "lazy_load_members",
                        "required": false,
                        "type": "boolean"
                    },
                    {
                        "description": "If ``true``, sends all membership events for all events, even if they have already\nbeen sent to the client. Does not\napply unless ``lazy_load_members`` is ``true``. See\n`Lazy-loading room members <#lazy-loading-room-members>`_\nfor more information. Defaults to ``false``.",
                        "name": "include_redundant_members",
                        "required": false,
                        "type": "boolean"
                    },
                    {
                        "description": "A list of room IDs to exclude. If this list is absent then no rooms are excluded. A matching room will be excluded even if it is listed in the ``'rooms'`` filter.",
                        "name": "not_rooms",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "A list of room IDs to include. If this list is absent then all rooms are included.",
                        "name": "rooms",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "If ``true``, includes only events with a ``url`` key in their content. If ``false``, excludes those events. If omitted, ``url`` key is not considered for filtering.",
                        "name": "contains_url",
                        "required": false,
                        "type": "boolean"
                    }
                ]
            },
            {
                "name": "Include Event Context",
                "properties": [
                    {
                        "description": "How many events before the result are\nreturned. By default, this is ``5``.",
                        "name": "before_limit",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "description": "How many events after the result are\nreturned. By default, this is ``5``.",
                        "name": "after_limit",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "description": "Requests that the server returns the\nhistoric profile information for the users\nthat sent the events that were returned.\nBy default, this is ``false``.",
                        "name": "include_profile",
                        "required": false,
                        "type": "boolean"
                    }
                ]
            },
            {
                "name": "Group",
                "properties": [
                    {
                        "description": "Key that defines the group.",
                        "name": "key",
                        "required": false,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "Groupings",
                "properties": [
                    {
                        "description": "List of groups to request.",
                        "name": "group_by",
                        "required": false,
                        "type": "[Group]"
                    }
                ]
            },
            {
                "name": "Room Events Criteria",
                "properties": [
                    {
                        "description": "The string to search events for",
                        "name": "search_term",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "The keys to search. Defaults to all.",
                        "name": "keys",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "This takes a `filter`_.",
                        "name": "filter",
                        "required": false,
                        "type": "Filter"
                    },
                    {
                        "description": "The order in which to search for results.\nBy default, this is ``\"rank\"``.",
                        "name": "order_by",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "Configures whether any context for the events\nreturned are included in the response.",
                        "name": "event_context",
                        "required": false,
                        "type": "Include Event Context"
                    },
                    {
                        "description": "Requests the server return the current state for\neach room returned.",
                        "name": "include_state",
                        "required": false,
                        "type": "boolean"
                    },
                    {
                        "description": "Requests that the server partitions the result set\nbased on the provided list of keys.",
                        "name": "groupings",
                        "required": false,
                        "type": "Groupings"
                    }
                ]
            },
            {
                "name": "Categories",
                "properties": [
                    {
                        "description": "Mapping of category name to search criteria.",
                        "name": "room_events",
                        "required": false,
                        "type": "Room Events Criteria"
                    }
                ]
            },
            {
                "name": "Event",
                "properties": []
            },
            {
                "name": "UnsignedData",
                "properties": [
                    {
                        "description": "The time in milliseconds that has elapsed since the event was sent. This field is generated by the local homeserver, and may be incorrect if the local time on at least one of the two servers is out of sync, which can cause the age to either be negative or greater than it actually is.",
                        "name": "age",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "description": "The event that redacted this event, if any.",
                        "name": "redacted_because",
                        "required": false,
                        "type": "Event"
                    },
                    {
                        "description": "The client-supplied transaction ID, for example, provided via\n``PUT /_matrix/client/r0/rooms/{roomId}/send/{eventType}/{txnId}``,\nif the client being given the event is the same one which sent it.\n",
                        "name": "transaction_id",
                        "required": false,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "Event",
                "properties": [
                    {
                        "description": "The fields in this object will vary depending on the type of event. When interacting with the REST API, this is the HTTP body.",
                        "name": "content",
                        "required": true,
                        "type": "object"
                    },
                    {
                        "description": "The type of event. This SHOULD be namespaced similar to Java package naming conventions e.g. 'com.example.subdomain.event.type'",
                        "name": "type",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "The globally unique event identifier.",
                        "name": "event_id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "Contains the fully-qualified ID of the user who sent this event.",
                        "name": "sender",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "Timestamp in milliseconds on originating homeserver when this event was sent.",
                        "name": "origin_server_ts",
                        "required": true,
                        "type": "integer"
                    },
                    {
                        "description": "Contains optional extra information about the event.",
                        "name": "unsigned",
                        "required": false,
                        "type": "UnsignedData"
                    },
                    {
                        "description": "The ID of the room associated with this event. Will not be present on events\nthat arrive through ``/sync``, despite being required everywhere else.",
                        "name": "room_id",
                        "required": true,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "Profile Information",
                "properties": []
            },
            {
                "name": "Event Context",
                "properties": [
                    {
                        "description": "Pagination token for the start of the chunk",
                        "name": "start",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "Pagination token for the end of the chunk",
                        "name": "end",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The historic profile information of the\nusers that sent the events returned.\n\nThe ``string`` key is the user ID for which\nthe profile belongs to.",
                        "name": "profile_info",
                        "required": false,
                        "type": "Profile Information"
                    },
                    {
                        "description": "Events just before the result.",
                        "name": "events_before",
                        "required": false,
                        "type": "[Event]"
                    },
                    {
                        "description": "Events just after the result.",
                        "name": "events_after",
                        "required": false,
                        "type": "[Event]"
                    }
                ]
            },
            {
                "name": "Result",
                "properties": [
                    {
                        "description": "A number that describes how closely this result matches the search. Higher is closer.",
                        "name": "rank",
                        "required": false,
                        "type": "number"
                    },
                    {
                        "description": "The event that matched.",
                        "name": "result",
                        "required": false,
                        "type": "Event"
                    },
                    {
                        "description": "Context for result, if requested.",
                        "name": "context",
                        "required": false,
                        "type": "Event Context"
                    }
                ]
            },
            {
                "name": "Current state",
                "properties": []
            },
            {
                "name": "Groups",
                "properties": []
            },
            {
                "name": "Result Room Events",
                "properties": [
                    {
                        "description": "An approximate count of the total number of results found.",
                        "name": "count",
                        "required": false,
                        "type": "integer"
                    },
                    {
                        "description": "List of words which should be highlighted, useful for stemming which may change the query terms.",
                        "name": "highlights",
                        "required": false,
                        "type": "[string]"
                    },
                    {
                        "description": "List of results in the requested order.",
                        "name": "results",
                        "required": false,
                        "type": "[Result]"
                    },
                    {
                        "description": "The current state for every room in the results.\nThis is included if the request had the\n``include_state`` key set with a value of ``true``.\n\nThe ``string`` key is the room ID for which the ``State\nEvent`` array belongs to.",
                        "name": "state",
                        "required": false,
                        "type": "Current state"
                    },
                    {
                        "description": "Any groups that were requested.\n\nThe outer ``string`` key is the group key requested (eg: ``room_id``\nor ``sender``). The inner ``string`` key is the grouped value (eg:\na room's ID or a user's ID).",
                        "name": "groups",
                        "required": false,
                        "type": "Groups"
                    },
                    {
                        "description": "Token that can be used to get the next batch of\nresults, by passing as the `next_batch` parameter to\nthe next call. If this field is absent, there are no\nmore results.",
                        "name": "next_batch",
                        "required": false,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "Result Categories",
                "properties": [
                    {
                        "description": "Mapping of category name to search criteria.",
                        "name": "room_events",
                        "required": false,
                        "type": "Result Room Events"
                    }
                ]
            }
        ],
        "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "description": "Performs a full text search across different categories.",
        "method": "POST",
        "parameters": {
            "Body": [
                {
                    "description": "Describes which categories to search in and their criteria.",
                    "name": "search_categories",
                    "required": true,
                    "type": "Categories"
                }
            ],
            "Query": [
                {
                    "description": "The point to return events from. If given, this should be a\n``next_batch`` result from a previous call to this endpoint.",
                    "name": "next_batch",
                    "required": false,
                    "type": "string"
                }
            ]
        },
        "path": "/search",
        "rate_limited": true,
        "requires_auth": true,
        "responses": [
            {
                "description": "Results of the search.",
                "examples": {
                    "application/json": {
                        "search_categories": {
                            "room_events": {
                                "count": 1224,
                                "groups": {
                                    "room_id": {
                                        "!qPewotXpIctQySfjSy:localhost": {
                                            "next_batch": "BdgFsdfHSf-dsFD",
                                            "order": 1,
                                            "results": [
                                                "$144429830826TWwbB:localhost"
                                            ]
                                        }
                                    }
                                },
                                "highlights": [
                                    "martians",
                                    "men"
                                ],
                                "next_batch": "5FdgFsd234dfgsdfFD",
                                "results": [
                                    {
                                        "rank": 0.00424866,
                                        "result": {
                                            "content": {
                                                "body": "This is an example text message",
                                                "format": "org.matrix.custom.html",
                                                "formatted_body": "<b>This is an example text message</b>",
                                                "msgtype": "m.text"
                                            },
                                            "event_id": "$144429830826TWwbB:localhost",
                                            "origin_server_ts": 1432735824653,
                                            "room_id": "!qPewotXpIctQySfjSy:localhost",
                                            "sender": "@example:example.org",
                                            "type": "m.room.message",
                                            "unsigned": {
                                                "age": 1234
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "description": "Describes which categories to search in and their criteria.",
                        "name": "search_categories",
                        "required": true,
                        "type": "Result Categories"
                    }
                ],
                "required": false,
                "status": 200
            },
            {
                "description": "Part of the request was invalid.",
                "examples": "",
                "parameters": [],
                "required": false,
                "status": 400
            },
            {
                "description": "This request was rate-limited.",
                "examples": "",
                "parameters": [
                    {
                        "description": "The M_LIMIT_EXCEEDED error code",
                        "name": "errcode",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "A human-readable error message.",
                        "name": "error",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                        "name": "retry_after_ms",
                        "required": false,
                        "type": "integer"
                    }
                ],
                "required": false,
                "status": 429
            }
        ],
        "summary": "Perform a server-side search."
    }
]