{
    "__meta": {
        "base": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "endpoints": [
            {
                "deprecated": false,
                "desc": "Gets an OpenID token object that the requester may supply to another\nservice to verify their identity in Matrix. The generated token is only\nvalid for exchanging for user information from the federation API for\nOpenID.\n\nThe access token generated is only valid for the OpenID API. It cannot\nbe used to request another OpenID access token or call ``/sync``, for\nexample.",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/user/%40alice%3Aexample.com/openid/request_token HTTP/1.1\nContent-Type: application/json\n\n{}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/user/{userId}/openid/request_token",
                "rate_limited": true,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "path": [
                        {
                            "desc": "**Required.** The user to request and OpenID token for. Should be the user who\nis authenticated for the request.",
                            "key": "userId",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** An access token the consumer may use to verify the identity of\nthe person who generated the token. This is given to the federation\nAPI ``GET /openid/userinfo`` to verify the user's identity.",
                                "key": "access_token",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "**Required.** The string ``Bearer``.",
                                "key": "token_type",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "**Required.** The homeserver domain the consumer should use when attempting to\nverify the user's identity.",
                                "key": "matrix_server_name",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "**Required.** The number of seconds before this token expires and a new one must\nbe generated.",
                                "key": "expires_in",
                                "required": true,
                                "title": "integer"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "OpenID token information. This response is nearly compatible with the\nresponse documented in the `OpenID Connect 1.0 Specification <http://openid.net/specs/openid-connect-core-1_0.html#TokenResponse>`_\nwith the only difference being the lack of an ``id_token``. Instead,\nthe Matrix homeserver's name is provided.",
                        "example": "{\n  \"access_token\": \"SomeT0kenHere\",\n  \"token_type\": \"Bearer\",\n  \"matrix_server_name\": \"example.com\",\n  \"expires_in\": 3600\n}"
                    },
                    {
                        "code": 429,
                        "description": "This request was rate-limited.",
                        "example": "{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"Too many requests\",\n  \"retry_after_ms\": 2000\n}"
                    }
                ],
                "title": "Get an OpenID token object to verify the requester's identity."
            }
        ],
        "group": "openid_cs"
    },
    "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
    "consumes": [
        "application/json"
    ],
    "host": "localhost:8008",
    "info": {
        "title": "Matrix Client-Server OpenID API",
        "version": "1.0.0"
    },
    "paths": {
        "/user/{userId}/openid/request_token": {
            "post": {
                "description": "Gets an OpenID token object that the requester may supply to another\nservice to verify their identity in Matrix. The generated token is only\nvalid for exchanging for user information from the federation API for\nOpenID.\n\nThe access token generated is only valid for the OpenID API. It cannot\nbe used to request another OpenID access token or call ``/sync``, for\nexample.",
                "operationId": "requestOpenIdToken",
                "parameters": [
                    {
                        "description": "The user to request and OpenID token for. Should be the user who\nis authenticated for the request.",
                        "in": "path",
                        "name": "userId",
                        "required": true,
                        "type": "string",
                        "x-example": "@alice:example.com"
                    },
                    {
                        "description": "An empty object. Reserved for future expansion.",
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "example": {},
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OpenID token information. This response is nearly compatible with the\nresponse documented in the `OpenID Connect 1.0 Specification <http://openid.net/specs/openid-connect-core-1_0.html#TokenResponse>`_\nwith the only difference being the lack of an ``id_token``. Instead,\nthe Matrix homeserver's name is provided.",
                        "examples": {
                            "application/json": {
                                "access_token": "SomeT0kenHere",
                                "expires_in": 3600,
                                "matrix_server_name": "example.com",
                                "token_type": "Bearer"
                            }
                        },
                        "schema": {
                            "properties": {
                                "access_token": {
                                    "description": "An access token the consumer may use to verify the identity of\nthe person who generated the token. This is given to the federation\nAPI ``GET /openid/userinfo`` to verify the user's identity.",
                                    "type": "string"
                                },
                                "expires_in": {
                                    "description": "The number of seconds before this token expires and a new one must\nbe generated.",
                                    "type": "integer"
                                },
                                "matrix_server_name": {
                                    "description": "The homeserver domain the consumer should use when attempting to\nverify the user's identity.",
                                    "type": "string"
                                },
                                "token_type": {
                                    "description": "The string ``Bearer``.",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "access_token",
                                "token_type",
                                "matrix_server_name",
                                "expires_in"
                            ],
                            "type": "object"
                        }
                    },
                    "429": {
                        "description": "This request was rate-limited.",
                        "schema": {
                            "description": "The rate limit was reached for this request",
                            "properties": {
                                "errcode": {
                                    "description": "The M_LIMIT_EXCEEDED error code",
                                    "example": "M_LIMIT_EXCEEDED",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "Too many requests",
                                    "type": "string"
                                },
                                "retry_after_ms": {
                                    "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                                    "example": 2000,
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "security": [
                    {
                        "accessToken": []
                    }
                ],
                "summary": "Get an OpenID token object to verify the requester's identity.",
                "tags": [
                    "OpenID"
                ]
            }
        }
    },
    "produces": [
        "application/json"
    ],
    "schemes": [
        "https",
        "http"
    ],
    "securityDefinitions": {
        "accessToken": {
            "description": "The access_token returned by a call to ``/login`` or ``/register``",
            "in": "query",
            "name": "access_token",
            "type": "apiKey"
        }
    },
    "swagger": "2.0"
}