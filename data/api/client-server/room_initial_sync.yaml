[
    {
        "additional_types": [],
        "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "description": "Get a copy of the current state and the most recent messages in a room.\n\nThis endpoint was deprecated in r0 of this specification. There is no\ndirect replacement; the relevant information is returned by the\n|/sync|_ API. See the `migration guide\n<https://matrix.org/docs/guides/client-server-migrating-from-v1.html#deprecated-endpoints>`_.",
        "method": "GET",
        "parameters": {
            "Body": [],
            "Form": [],
            "Header": [],
            "Path": [
                {
                    "description": "The room to get the data.",
                    "name": "roomId",
                    "required": true,
                    "type": "string"
                }
            ],
            "Query": []
        },
        "path": "/rooms/{roomId}/initialSync",
        "rate_limited": false,
        "requires_auth": true,
        "responses": [
            {
                "additional_types": [
                    {
                        "name": "Event",
                        "properties": []
                    },
                    {
                        "name": "UnsignedData",
                        "properties": [
                            {
                                "description": "The time in milliseconds that has elapsed since the event was sent. This field is generated by the local homeserver, and may be incorrect if the local time on at least one of the two servers is out of sync, which can cause the age to either be negative or greater than it actually is.",
                                "name": "age",
                                "required": false,
                                "type": "integer"
                            },
                            {
                                "description": "The event that redacted this event, if any.",
                                "name": "redacted_because",
                                "required": false,
                                "type": "Event"
                            },
                            {
                                "description": "The client-supplied transaction ID, for example, provided via\n``PUT /_matrix/client/r0/rooms/{roomId}/send/{eventType}/{txnId}``,\nif the client being given the event is the same one which sent it.\n",
                                "name": "transaction_id",
                                "required": false,
                                "type": "string"
                            }
                        ]
                    },
                    {
                        "name": "RoomEvent",
                        "properties": [
                            {
                                "description": "The fields in this object will vary depending on the type of event. When interacting with the REST API, this is the HTTP body.",
                                "name": "content",
                                "required": true,
                                "type": "object"
                            },
                            {
                                "description": "The type of event. This SHOULD be namespaced similar to Java package naming conventions e.g. 'com.example.subdomain.event.type'",
                                "name": "type",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "The globally unique event identifier.",
                                "name": "event_id",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "Contains the fully-qualified ID of the user who sent this event.",
                                "name": "sender",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "Timestamp in milliseconds on originating homeserver when this event was sent.",
                                "name": "origin_server_ts",
                                "required": true,
                                "type": "integer"
                            },
                            {
                                "description": "Contains optional extra information about the event.",
                                "name": "unsigned",
                                "required": false,
                                "type": "UnsignedData"
                            },
                            {
                                "description": "The ID of the room associated with this event. Will not be present on events\nthat arrive through ``/sync``, despite being required everywhere else.",
                                "name": "room_id",
                                "required": true,
                                "type": "string"
                            }
                        ]
                    },
                    {
                        "name": "PaginationChunk",
                        "properties": [
                            {
                                "description": "A token which correlates to the first value in ``chunk``.\nUsed for pagination.",
                                "name": "start",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "A token which correlates to the last value in ``chunk``.\nUsed for pagination.",
                                "name": "end",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "If the user is a member of the room this will be a\nlist of the most recent messages for this room. If\nthe user has left the room this will be the\nmessages that preceeded them leaving. This array\nwill consist of at most ``limit`` elements.",
                                "name": "chunk",
                                "required": true,
                                "type": "[RoomEvent]"
                            }
                        ]
                    },
                    {
                        "name": "EventContent",
                        "properties": []
                    },
                    {
                        "name": "StateEvent",
                        "properties": [
                            {
                                "description": "The fields in this object will vary depending on the type of event. When interacting with the REST API, this is the HTTP body.",
                                "name": "content",
                                "required": true,
                                "type": "object"
                            },
                            {
                                "description": "The type of event. This SHOULD be namespaced similar to Java package naming conventions e.g. 'com.example.subdomain.event.type'",
                                "name": "type",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "The globally unique event identifier.",
                                "name": "event_id",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "Contains the fully-qualified ID of the user who sent this event.",
                                "name": "sender",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "Timestamp in milliseconds on originating homeserver when this event was sent.",
                                "name": "origin_server_ts",
                                "required": true,
                                "type": "integer"
                            },
                            {
                                "description": "Contains optional extra information about the event.",
                                "name": "unsigned",
                                "required": false,
                                "type": "UnsignedData"
                            },
                            {
                                "description": "The ID of the room associated with this event. Will not be present on events\nthat arrive through ``/sync``, despite being required everywhere else.",
                                "name": "room_id",
                                "required": true,
                                "type": "string"
                            },
                            {
                                "description": "Optional. The previous ``content`` for this event. If there is no previous content, this key will be missing.",
                                "name": "prev_content",
                                "required": false,
                                "type": "EventContent"
                            },
                            {
                                "description": "A unique key which defines the overwriting semantics for this piece of room state. This value is often a zero-length string. The presence of this key makes this event a State Event.\nState keys starting with an ``@`` are reserved for referencing user IDs, such as room members. With the exception of a few events, state events set with a given user's ID as the state key MUST only be set by that user.",
                                "name": "state_key",
                                "required": true,
                                "type": "string"
                            }
                        ]
                    }
                ],
                "description": "The current state of the room",
                "examples": {
                    "application/json": {
                        "account_data": [
                            {
                                "content": {
                                    "tags": {
                                        "work": {
                                            "order": "1"
                                        }
                                    }
                                },
                                "type": "m.tag"
                            }
                        ],
                        "membership": "join",
                        "messages": {
                            "chunk": [
                                {
                                    "content": {
                                        "body": "This is an example text message",
                                        "format": "org.matrix.custom.html",
                                        "formatted_body": "<b>This is an example text message</b>",
                                        "msgtype": "m.text"
                                    },
                                    "event_id": "$143273582443PhrSn:example.org",
                                    "origin_server_ts": 1432735824653,
                                    "room_id": "!636q39766251:example.com",
                                    "sender": "@example:example.org",
                                    "type": "m.room.message",
                                    "unsigned": {
                                        "age": 1234
                                    }
                                },
                                {
                                    "content": {
                                        "body": "something-important.doc",
                                        "filename": "something-important.doc",
                                        "info": {
                                            "mimetype": "application/msword",
                                            "size": 46144
                                        },
                                        "msgtype": "m.file",
                                        "url": "mxc://example.org/FHyPlCeYUSFFxlgbQYZmoEoe"
                                    },
                                    "event_id": "$143273582443PhrSn:example.org",
                                    "origin_server_ts": 1432735824653,
                                    "room_id": "!636q39766251:example.com",
                                    "sender": "@example:example.org",
                                    "type": "m.room.message",
                                    "unsigned": {
                                        "age": 1234
                                    }
                                }
                            ],
                            "end": "s3456_9_0",
                            "start": "t44-3453_9_0"
                        },
                        "room_id": "!636q39766251:example.com",
                        "state": [
                            {
                                "content": {
                                    "join_rule": "public"
                                },
                                "event_id": "$143273582443PhrSn:example.org",
                                "origin_server_ts": 1432735824653,
                                "room_id": "!636q39766251:example.com",
                                "sender": "@example:example.org",
                                "state_key": "",
                                "type": "m.room.join_rules",
                                "unsigned": {
                                    "age": 1234
                                }
                            },
                            {
                                "content": {
                                    "avatar_url": "mxc://example.org/SEsfnsuifSDFSSEF",
                                    "displayname": "Alice Margatroid",
                                    "membership": "join"
                                },
                                "event_id": "$143273582443PhrSn:example.org",
                                "origin_server_ts": 1432735824653,
                                "room_id": "!636q39766251:example.com",
                                "sender": "@example:example.org",
                                "state_key": "@alice:example.org",
                                "type": "m.room.member",
                                "unsigned": {
                                    "age": 1234
                                }
                            },
                            {
                                "content": {
                                    "creator": "@example:example.org",
                                    "m.federate": true,
                                    "predecessor": {
                                        "event_id": "$something:example.org",
                                        "room_id": "!oldroom:example.org"
                                    },
                                    "room_version": "1"
                                },
                                "event_id": "$143273582443PhrSn:example.org",
                                "origin_server_ts": 1432735824653,
                                "room_id": "!636q39766251:example.com",
                                "sender": "@example:example.org",
                                "state_key": "",
                                "type": "m.room.create",
                                "unsigned": {
                                    "age": 1234
                                }
                            },
                            {
                                "content": {
                                    "ban": 50,
                                    "events": {
                                        "m.room.name": 100,
                                        "m.room.power_levels": 100
                                    },
                                    "events_default": 0,
                                    "invite": 50,
                                    "kick": 50,
                                    "notifications": {
                                        "room": 20
                                    },
                                    "redact": 50,
                                    "state_default": 50,
                                    "users": {
                                        "@example:localhost": 100
                                    },
                                    "users_default": 0
                                },
                                "event_id": "$143273582443PhrSn:example.org",
                                "origin_server_ts": 1432735824653,
                                "room_id": "!636q39766251:example.com",
                                "sender": "@example:example.org",
                                "state_key": "",
                                "type": "m.room.power_levels",
                                "unsigned": {
                                    "age": 1234
                                }
                            }
                        ],
                        "visibility": "private"
                    }
                },
                "parameters": [
                    {
                        "description": "The ID of this room.",
                        "name": "room_id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "The user's membership state in this room.",
                        "name": "membership",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The pagination chunk for this room.",
                        "name": "messages",
                        "required": false,
                        "type": "PaginationChunk"
                    },
                    {
                        "description": "If the user is a member of the room this will be the\ncurrent state of the room as a list of events. If the\nuser has left the room this will be the state of the\nroom when they left it.",
                        "name": "state",
                        "required": false,
                        "type": "[StateEvent]"
                    },
                    {
                        "description": "Whether this room is visible to the ``/publicRooms`` API\nor not.\"",
                        "name": "visibility",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The private data that this user has attached to this room.",
                        "name": "account_data",
                        "required": false,
                        "type": "[Event]"
                    }
                ],
                "required": false,
                "status": 200
            },
            {
                "additional_types": [],
                "description": "You aren't a member of the room and weren't previously a member of the room.\n",
                "examples": "",
                "parameters": [],
                "required": false,
                "status": 403
            }
        ],
        "summary": "Snapshot the current state of a room and its most recent messages."
    }
]