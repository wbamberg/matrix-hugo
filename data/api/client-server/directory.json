{
    "__meta": {
        "base": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "endpoints": [
            {
                "deprecated": false,
                "desc": "Create a new mapping from room alias to room ID.",
                "example": {
                    "req": "PUT /_matrix/client/%CLIENT_MAJOR_VERSION%/directory/room/%23monkeys%3Amatrix.org HTTP/1.1\nContent-Type: application/json\n\n{\n  \"room_id\": \"!abnjk1jdasj98:capuchins.com\"\n}"
                },
                "method": "PUT",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/directory/room/{roomAlias}",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "**Required.** The room ID to set.",
                            "key": "room_id",
                            "required": true,
                            "title": "string"
                        }
                    ],
                    "path": [
                        {
                            "desc": "**Required.** The room alias to set.",
                            "key": "roomAlias",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [],
                "responses": [
                    {
                        "code": 200,
                        "description": "The mapping was created.",
                        "example": "{}"
                    },
                    {
                        "code": 409,
                        "description": "A room alias with that name already exists.",
                        "example": "{\n  \"errcode\": \"M_UNKNOWN\",\n  \"error\": \"Room alias #monkeys:matrix.org already exists.\"\n}"
                    }
                ],
                "title": "Create a new mapping from room alias to room ID."
            },
            {
                "deprecated": false,
                "desc": "Requests that the server resolve a room alias to a room ID.\n\nThe server will use the federation API to resolve the alias if the\ndomain part of the alias does not correspond to the server's own\ndomain.",
                "example": {
                    "req": "GET /_matrix/client/%CLIENT_MAJOR_VERSION%/directory/room/%23monkeys%3Amatrix.org HTTP/1.1\n\n"
                },
                "method": "GET",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/directory/room/{roomAlias}",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "path": [
                        {
                            "desc": "**Required.** The room alias.",
                            "key": "roomAlias",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": false,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "The room ID for this room alias.",
                                "key": "room_id",
                                "required": false,
                                "title": "string"
                            },
                            {
                                "desc": "A list of servers that are aware of this room alias.",
                                "key": "servers",
                                "required": false,
                                "title": "[string]"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "The room ID and other information for this alias.",
                        "example": "{\n  \"room_id\": \"!abnjk1jdasj98:capuchins.com\",\n  \"servers\": [\n    \"capuchins.com\",\n    \"matrix.org\",\n    \"another.com\"\n  ]\n}"
                    },
                    {
                        "code": 404,
                        "description": "There is no mapped room ID for this room alias.",
                        "example": "{\n  \"errcode\": \"M_NOT_FOUND\",\n  \"error\": \"Room alias #monkeys:matrix.org not found.\"\n}"
                    }
                ],
                "title": "Get the room ID corresponding to this room alias."
            },
            {
                "deprecated": false,
                "desc": "Remove a mapping of room alias to room ID.\n\nServers may choose to implement additional access control checks here, for instance that\nroom aliases can only be deleted by their creator or a server administrator.\n\n.. Note::\n   Servers may choose to update the ``alt_aliases`` for the ``m.room.canonical_alias``\n   state event in the room when an alias is removed. Servers which choose to update the\n   canonical alias event are recommended to, in addition to their other relevant permission\n   checks, delete the alias and return a successful response even if the user does not\n   have permission to update the ``m.room.canonical_alias`` event.",
                "example": {
                    "req": "DELETE /_matrix/client/%CLIENT_MAJOR_VERSION%/directory/room/%23monkeys%3Amatrix.org HTTP/1.1\n\n"
                },
                "method": "DELETE",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/directory/room/{roomAlias}",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "path": [
                        {
                            "desc": "**Required.** The room alias to remove.",
                            "key": "roomAlias",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [],
                "responses": [
                    {
                        "code": 200,
                        "description": "The mapping was deleted.",
                        "example": "{}"
                    },
                    {
                        "code": 404,
                        "description": "There is no mapped room ID for this room alias.",
                        "example": "{\n  \"errcode\": \"M_NOT_FOUND\",\n  \"error\": \"Room alias #monkeys:example.org not found.\"\n}"
                    }
                ],
                "title": "Remove a mapping of room alias to room ID."
            },
            {
                "deprecated": false,
                "desc": "Get a list of aliases maintained by the local server for the\ngiven room.\n\nThis endpoint can be called by users who are in the room (external\nusers receive an ``M_FORBIDDEN`` error response). If the room's\n``m.room.history_visibility`` maps to ``world_readable``, any\nuser can call this endpoint.\n\nServers may choose to implement additional access control checks here,\nsuch as allowing server administrators to view aliases regardless of\nmembership.\n\n.. Note::\n   Clients are recommended not to display this list of aliases prominently\n   as they are not curated, unlike those listed in the ``m.room.canonical_alias``\n   state event.",
                "example": {
                    "req": "GET /_matrix/client/%CLIENT_MAJOR_VERSION%/rooms/%21abc123%3Aexample.org/aliases HTTP/1.1\n\n"
                },
                "method": "GET",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/rooms/{roomId}/aliases",
                "rate_limited": true,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "path": [
                        {
                            "desc": "**Required.** The room ID to find local aliases of.",
                            "key": "roomId",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** The server's local aliases on the room. Can be empty.",
                                "key": "aliases",
                                "required": true,
                                "title": "[string]"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "The list of local aliases for the room.",
                        "example": "{\n  \"aliases\": [\n    \"#somewhere:example.com\",\n    \"#another:example.com\",\n    \"#hat_trick:example.com\"\n  ]\n}"
                    },
                    {
                        "code": 403,
                        "description": "The user is not permitted to retrieve the list of local aliases for the room.",
                        "example": "{\n  \"errcode\": \"M_FORBIDDEN\",\n  \"error\": \"You are not a member of the room.\"\n}"
                    },
                    {
                        "code": 429,
                        "description": "This request was rate-limited.",
                        "example": "{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"Too many requests\",\n  \"retry_after_ms\": 2000\n}"
                    }
                ],
                "title": "Get a list of local aliases on a given room."
            }
        ],
        "group": "directory_cs"
    },
    "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
    "consumes": [
        "application/json"
    ],
    "host": "localhost:8008",
    "info": {
        "title": "Matrix Client-Server Directory API",
        "version": "1.0.0"
    },
    "paths": {
        "/directory/room/{roomAlias}": {
            "delete": {
                "description": "Remove a mapping of room alias to room ID.\n\nServers may choose to implement additional access control checks here, for instance that\nroom aliases can only be deleted by their creator or a server administrator.\n\n.. Note::\n   Servers may choose to update the ``alt_aliases`` for the ``m.room.canonical_alias``\n   state event in the room when an alias is removed. Servers which choose to update the\n   canonical alias event are recommended to, in addition to their other relevant permission\n   checks, delete the alias and return a successful response even if the user does not\n   have permission to update the ``m.room.canonical_alias`` event.",
                "operationId": "deleteRoomAlias",
                "parameters": [
                    {
                        "description": "The room alias to remove.",
                        "in": "path",
                        "name": "roomAlias",
                        "required": true,
                        "type": "string",
                        "x-example": "#monkeys:matrix.org"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The mapping was deleted.",
                        "examples": {
                            "application/json": {}
                        },
                        "schema": {
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "There is no mapped room ID for this room alias.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_NOT_FOUND",
                                "error": "Room alias #monkeys:example.org not found."
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "security": [
                    {
                        "accessToken": []
                    }
                ],
                "summary": "Remove a mapping of room alias to room ID.",
                "tags": [
                    "Room directory"
                ]
            },
            "get": {
                "description": "Requests that the server resolve a room alias to a room ID.\n\nThe server will use the federation API to resolve the alias if the\ndomain part of the alias does not correspond to the server's own\ndomain.",
                "operationId": "getRoomIdByAlias",
                "parameters": [
                    {
                        "description": "The room alias.",
                        "in": "path",
                        "name": "roomAlias",
                        "required": true,
                        "type": "string",
                        "x-example": "#monkeys:matrix.org"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The room ID and other information for this alias.",
                        "examples": {
                            "application/json": {
                                "room_id": "!abnjk1jdasj98:capuchins.com",
                                "servers": [
                                    "capuchins.com",
                                    "matrix.org",
                                    "another.com"
                                ]
                            }
                        },
                        "schema": {
                            "properties": {
                                "room_id": {
                                    "description": "The room ID for this room alias.",
                                    "type": "string"
                                },
                                "servers": {
                                    "description": "A list of servers that are aware of this room alias.",
                                    "items": {
                                        "description": "A server which is aware of this room alias.",
                                        "type": "string"
                                    },
                                    "type": "array"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "404": {
                        "description": "There is no mapped room ID for this room alias.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_NOT_FOUND",
                                "error": "Room alias #monkeys:matrix.org not found."
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "summary": "Get the room ID corresponding to this room alias.",
                "tags": [
                    "Room directory"
                ]
            },
            "put": {
                "operationId": "setRoomAlias",
                "parameters": [
                    {
                        "description": "The room alias to set.",
                        "in": "path",
                        "name": "roomAlias",
                        "required": true,
                        "type": "string",
                        "x-example": "#monkeys:matrix.org"
                    },
                    {
                        "description": "Information about this room alias.",
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "example": {
                                "room_id": "!abnjk1jdasj98:capuchins.com"
                            },
                            "properties": {
                                "room_id": {
                                    "description": "The room ID to set.",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "room_id"
                            ],
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The mapping was created.",
                        "examples": {
                            "application/json": {}
                        },
                        "schema": {
                            "type": "object"
                        }
                    },
                    "409": {
                        "description": "A room alias with that name already exists.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_UNKNOWN",
                                "error": "Room alias #monkeys:matrix.org already exists."
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "security": [
                    {
                        "accessToken": []
                    }
                ],
                "summary": "Create a new mapping from room alias to room ID.",
                "tags": [
                    "Room directory"
                ]
            }
        },
        "/rooms/{roomId}/aliases": {
            "get": {
                "description": "Get a list of aliases maintained by the local server for the\ngiven room.\n\nThis endpoint can be called by users who are in the room (external\nusers receive an ``M_FORBIDDEN`` error response). If the room's\n``m.room.history_visibility`` maps to ``world_readable``, any\nuser can call this endpoint.\n\nServers may choose to implement additional access control checks here,\nsuch as allowing server administrators to view aliases regardless of\nmembership.\n\n.. Note::\n   Clients are recommended not to display this list of aliases prominently\n   as they are not curated, unlike those listed in the ``m.room.canonical_alias``\n   state event.",
                "operationId": "getLocalAliases",
                "parameters": [
                    {
                        "description": "The room ID to find local aliases of.",
                        "in": "path",
                        "name": "roomId",
                        "required": true,
                        "type": "string",
                        "x-example": "!abc123:example.org"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The list of local aliases for the room.",
                        "examples": {
                            "application/json": {
                                "aliases": [
                                    "#somewhere:example.com",
                                    "#another:example.com",
                                    "#hat_trick:example.com"
                                ]
                            }
                        },
                        "schema": {
                            "properties": {
                                "aliases": {
                                    "description": "The server's local aliases on the room. Can be empty.",
                                    "items": {
                                        "type": "string"
                                    },
                                    "type": "array"
                                }
                            },
                            "required": [
                                "aliases"
                            ],
                            "type": "object"
                        }
                    },
                    "403": {
                        "description": "The user is not permitted to retrieve the list of local aliases for the room.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_FORBIDDEN",
                                "error": "You are not a member of the room."
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "429": {
                        "description": "This request was rate-limited.",
                        "schema": {
                            "description": "The rate limit was reached for this request",
                            "properties": {
                                "errcode": {
                                    "description": "The M_LIMIT_EXCEEDED error code",
                                    "example": "M_LIMIT_EXCEEDED",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "Too many requests",
                                    "type": "string"
                                },
                                "retry_after_ms": {
                                    "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                                    "example": 2000,
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "security": [
                    {
                        "accessToken": []
                    }
                ],
                "summary": "Get a list of local aliases on a given room.",
                "tags": [
                    "Room directory"
                ]
            }
        }
    },
    "produces": [
        "application/json"
    ],
    "schemes": [
        "https",
        "http"
    ],
    "securityDefinitions": {
        "accessToken": {
            "description": "The access_token returned by a call to ``/login`` or ``/register``",
            "in": "query",
            "name": "access_token",
            "type": "apiKey"
        }
    },
    "swagger": "2.0"
}