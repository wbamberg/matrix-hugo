{
    "__meta": {
        "base": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "endpoints": [
            {
                "deprecated": false,
                "desc": "This API endpoint uses the `User-Interactive Authentication API`_, except in\nthe cases where a guest account is being registered.\n\nRegister for an account on this homeserver.\n\nThere are two kinds of user account:\n\n- `user` accounts. These accounts may use the full API described in this specification.\n\n- `guest` accounts. These accounts may have limited permissions and may not be supported by all servers.\n\nIf registration is successful, this endpoint will issue an access token\nthe client can use to authorize itself in subsequent requests.\n\nIf the client does not supply a ``device_id``, the server must\nauto-generate one.\n\nThe server SHOULD register an account with a User ID based on the\n``username`` provided, if any. Note that the grammar of Matrix User ID\nlocalparts is restricted, so the server MUST either map the provided\n``username`` onto a ``user_id`` in a logical manner, or reject\n``username``\\s which do not comply to the grammar, with\n``M_INVALID_USERNAME``.\n\nMatrix clients MUST NOT assume that localpart of the registered\n``user_id`` matches the provided ``username``.\n\nThe returned access token must be associated with the ``device_id``\nsupplied by the client or generated by the server. The server may\ninvalidate any access token previously associated with that device. See\n`Relationship between access tokens and devices`_.\n\nWhen registering a guest account, all parameters in the request body\nwith the exception of ``initial_device_display_name`` MUST BE ignored\nby the server. The server MUST pick a ``device_id`` for the account\nregardless of input.\n\nAny user ID returned by this API must conform to the grammar given in the\n`Matrix specification <../appendices.html#user-identifiers>`_.",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/register?kind=user HTTP/1.1\nContent-Type: application/json\n\n{\n  \"auth\": {\n    \"type\": \"string\",\n    \"session\": \"string\"\n  },\n  \"username\": \"cheeky_monkey\",\n  \"password\": \"ilovebananas\",\n  \"device_id\": \"GHTYAJCE\",\n  \"initial_device_display_name\": \"Jungle Phone\",\n  \"inhibit_login\": false\n}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/register",
                "rate_limited": true,
                "req_body_tables": [
                    [
                        "Authentication Data",
                        null,
                        [
                            {
                                "desc": "**Required.** The login type that the client is attempting to complete.",
                                "key": "type",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "The value of the session key given by the homeserver.",
                                "key": "session",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "Additional authentication information for the\nuser-interactive authentication API. Note that this\ninformation is *not* used to define how the registered user\nshould be authenticated, but is instead used to\nauthenticate the ``register`` call itself.",
                            "key": "auth",
                            "required": false,
                            "title": "Authentication Data"
                        },
                        {
                            "desc": "The basis for the localpart of the desired Matrix ID. If omitted,\nthe homeserver MUST generate a Matrix ID local part.",
                            "key": "username",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "The desired password for the account.",
                            "key": "password",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "ID of the client device. If this does not correspond to a\nknown client device, a new device will be created. The server\nwill auto-generate a device_id if this is not specified.",
                            "key": "device_id",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "A display name to assign to the newly-created device. Ignored\nif ``device_id`` corresponds to a known device.",
                            "key": "initial_device_display_name",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "If true, an ``access_token`` and ``device_id`` should not be\nreturned from this call, therefore preventing an automatic\nlogin. Defaults to false.",
                            "key": "inhibit_login",
                            "required": false,
                            "title": "boolean"
                        }
                    ],
                    "query": [
                        {
                            "desc": "The kind of account to register. Defaults to ``user``. One of: [\"guest\", \"user\"]",
                            "key": "kind",
                            "required": false,
                            "title": "enum"
                        }
                    ]
                },
                "requires_auth": false,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** The fully-qualified Matrix user ID (MXID) that has been registered.\n\nAny user ID returned by this API must conform to the grammar given in the\n`Matrix specification <../appendices.html#user-identifiers>`_.",
                                "key": "user_id",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "An access token for the account.\nThis access token can then be used to authorize other requests.\nRequired if the ``inhibit_login`` option is false.",
                                "key": "access_token",
                                "required": false,
                                "title": "string"
                            },
                            {
                                "desc": "The server_name of the homeserver on which the account has\nbeen registered.\n\n**Deprecated**. Clients should extract the server_name from\n``user_id`` (by splitting at the first colon) if they require\nit. Note also that ``homeserver`` is not spelt this way.",
                                "key": "home_server",
                                "required": false,
                                "title": "string"
                            },
                            {
                                "desc": "ID of the registered device. Will be the same as the\ncorresponding parameter in the request, if one was specified.\nRequired if the ``inhibit_login`` option is false.",
                                "key": "device_id",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "The account has been registered.",
                        "example": "{\n  \"user_id\": \"@cheeky_monkey:matrix.org\",\n  \"access_token\": \"abc123\",\n  \"device_id\": \"GHTYAJCE\"\n}"
                    },
                    {
                        "code": 400,
                        "description": "Part of the request was invalid. This may include one of the following error codes:\n\n* ``M_USER_IN_USE`` : The desired user ID is already taken.\n* ``M_INVALID_USERNAME`` : The desired user ID is not a valid user name.\n* ``M_EXCLUSIVE`` : The desired user ID is in the exclusive namespace\n  claimed by an application service.\n\nThese errors may be returned at any stage of the registration process,\nincluding after authentication if the requested user ID was registered\nwhilst the client was performing authentication.\n\nHomeservers MUST perform the relevant checks and return these codes before\nperforming User-Interactive Authentication, although they may also return\nthem after authentication is completed if, for example, the requested user ID\nwas registered whilst the client was performing authentication.",
                        "example": "{\n  \"errcode\": \"M_USER_IN_USE\",\n  \"error\": \"Desired user ID is already taken.\"\n}"
                    },
                    {
                        "code": 401,
                        "description": "The homeserver requires additional authentication information.",
                        "example": "{\n  \"flows\": [\n    {\n      \"stages\": [\n        \"example.type.foo\"\n      ]\n    }\n  ],\n  \"params\": {\n    \"example.type.baz\": {\n      \"example_key\": \"foobar\"\n    }\n  },\n  \"session\": \"xxxxxxyz\",\n  \"completed\": [\n    \"example.type.foo\"\n  ]\n}"
                    },
                    {
                        "code": 403,
                        "description": "The homeserver does not permit registering the account. This response\ncan be used to identify that a particular ``kind`` of account is not\nallowed, or that registration is generally not supported by the homeserver.",
                        "example": "{\n  \"errcode\": \"M_FORBIDDEN\",\n  \"error\": \"Registration is disabled\"\n}"
                    },
                    {
                        "code": 429,
                        "description": "This request was rate-limited.",
                        "example": "{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"Too many requests\",\n  \"retry_after_ms\": 2000\n}"
                    }
                ],
                "title": "Register for an account on this homeserver."
            },
            {
                "deprecated": false,
                "desc": "The homeserver must check that the given email address is **not**\nalready associated with an account on this homeserver. The homeserver\nshould validate the email itself, either by sending a validation email\nitself or by using a service it has control over.",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/register/email/requestToken HTTP/1.1\nContent-Type: application/json\n\n{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"email\": \"alice@example.org\",\n  \"send_attempt\": 1,\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"id_server\": \"id.example.com\",\n  \"id_access_token\": \"string\"\n}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/register/email/requestToken",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "**Required.** A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                            "key": "client_secret",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The email address to validate.",
                            "key": "email",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The server will only send an email if the ``send_attempt``\nis a number greater than the most recent one which it has seen,\nscoped to that ``email`` + ``client_secret`` pair. This is to\navoid repeatedly sending the same email in the case of request\nretries between the POSTing user and the identity server.\nThe client should increment this value if they desire a new\nemail (e.g. a reminder) to be sent. If they do not, the server\nshould respond with success but not resend the email.",
                            "key": "send_attempt",
                            "required": true,
                            "title": "integer"
                        },
                        {
                            "desc": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                            "key": "next_link",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                            "key": "id_server",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                            "key": "id_access_token",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": false,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                "key": "sid",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                "key": "submit_url",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "An email has been sent to the specified address. Note that this\nmay be an email containing the validation token or it may be\ninforming the user of an error.",
                        "example": "{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}"
                    },
                    {
                        "code": 400,
                        "description": "Part of the request was invalid. This may include one of the following error codes:\n\n* ``M_THREEPID_IN_USE`` : The email address is already registered to an account on this server.\n  However, if the homeserver has the ability to send email, it is recommended that the server\n  instead send an email to the user with instructions on how to reset their password.\n  This prevents malicious parties from being able to determine if a given email address\n  has an account on the homeserver in question.\n* ``M_SERVER_NOT_TRUSTED`` : The ``id_server`` parameter refers to an identity server\n  that is not trusted by this homeserver.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_IN_USE\",\n  \"error\": \"The specified address is already in use\"\n}"
                    },
                    {
                        "code": 403,
                        "description": "The homeserver does not permit the address to be bound.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_DENIED\",\n  \"error\": \"Third party identifier is not allowed\"\n}"
                    }
                ],
                "title": "Begins the validation process for an email to be used during registration."
            },
            {
                "deprecated": false,
                "desc": "The homeserver must check that the given phone number is **not**\nalready associated with an account on this homeserver. The homeserver\nshould validate the phone number itself, either by sending a validation\nmessage itself or by using a service it has control over.",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/register/msisdn/requestToken HTTP/1.1\nContent-Type: application/json\n\n{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"country\": \"GB\",\n  \"phone_number\": \"07700900001\",\n  \"send_attempt\": 1,\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"id_server\": \"id.example.com\",\n  \"id_access_token\": \"string\"\n}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/register/msisdn/requestToken",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "**Required.** A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                            "key": "client_secret",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The two-letter uppercase ISO-3166-1 alpha-2 country code that the\nnumber in ``phone_number`` should be parsed as if it were dialled from.",
                            "key": "country",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The phone number to validate.",
                            "key": "phone_number",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The server will only send an SMS if the ``send_attempt`` is a\nnumber greater than the most recent one which it has seen,\nscoped to that ``country`` + ``phone_number`` + ``client_secret``\ntriple. This is to avoid repeatedly sending the same SMS in\nthe case of request retries between the POSTing user and the\nidentity server. The client should increment this value if\nthey desire a new SMS (e.g. a reminder) to be sent.",
                            "key": "send_attempt",
                            "required": true,
                            "title": "integer"
                        },
                        {
                            "desc": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                            "key": "next_link",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                            "key": "id_server",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                            "key": "id_access_token",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": false,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                "key": "sid",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                "key": "submit_url",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "An SMS message has been sent to the specified phone number. Note\nthat this may be an SMS message containing the validation token or\nit may be informing the user of an error.",
                        "example": "{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}"
                    },
                    {
                        "code": 400,
                        "description": "Part of the request was invalid. This may include one of the following error codes:\n\n* ``M_THREEPID_IN_USE`` : The phone number is already registered to an account on this server.\n  However, if the homeserver has the ability to send SMS message, it is recommended that the server\n  instead send an SMS message to the user with instructions on how to reset their password.\n  This prevents malicious parties from being able to determine if a given phone number\n  has an account on the homeserver in question.\n* ``M_SERVER_NOT_TRUSTED`` : The ``id_server`` parameter refers to an identity server\n  that is not trusted by this homeserver.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_IN_USE\",\n  \"error\": \"The specified address is already in use\"\n}"
                    },
                    {
                        "code": 403,
                        "description": "The homeserver does not permit the address to be bound.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_DENIED\",\n  \"error\": \"Third party identifier is not allowed\"\n}"
                    }
                ],
                "title": "Requests a validation token be sent to the given phone number for the purpose of registering an account"
            },
            {
                "deprecated": false,
                "desc": "Changes the password for an account on this homeserver.\n\nThis API endpoint uses the `User-Interactive Authentication API`_ to\nensure the user changing the password is actually the owner of the\naccount.\n\nAn access token should be submitted to this endpoint if the client has\nan active session.\n\nThe homeserver may change the flows available depending on whether a\nvalid access token is provided. The homeserver SHOULD NOT revoke the\naccess token provided in the request. Whether other access tokens for\nthe user are revoked depends on the request parameters.",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/account/password HTTP/1.1\nContent-Type: application/json\n\n{\n  \"new_password\": \"ihatebananas\",\n  \"logout_devices\": true,\n  \"auth\": {\n    \"type\": \"string\",\n    \"session\": \"string\"\n  }\n}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/account/password",
                "rate_limited": true,
                "req_body_tables": [
                    [
                        "Authentication Data",
                        null,
                        [
                            {
                                "desc": "**Required.** The login type that the client is attempting to complete.",
                                "key": "type",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "The value of the session key given by the homeserver.",
                                "key": "session",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "**Required.** The new password for the account.",
                            "key": "new_password",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "Whether the user's other access tokens, and their associated devices, should be\nrevoked if the request succeeds. Defaults to true.\n\nWhen ``false``, the server can still take advantage of `the soft logout method <#soft-logout>`_\nfor the user's remaining devices.",
                            "key": "logout_devices",
                            "required": false,
                            "title": "boolean"
                        },
                        {
                            "desc": "Additional authentication information for the user-interactive authentication API.",
                            "key": "auth",
                            "required": false,
                            "title": "Authentication Data"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [],
                "responses": [
                    {
                        "code": 200,
                        "description": "The password has been changed.",
                        "example": "{}"
                    },
                    {
                        "code": 401,
                        "description": "The homeserver requires additional authentication information.",
                        "example": "{\n  \"flows\": [\n    {\n      \"stages\": [\n        \"example.type.foo\"\n      ]\n    }\n  ],\n  \"params\": {\n    \"example.type.baz\": {\n      \"example_key\": \"foobar\"\n    }\n  },\n  \"session\": \"xxxxxxyz\",\n  \"completed\": [\n    \"example.type.foo\"\n  ]\n}"
                    },
                    {
                        "code": 429,
                        "description": "This request was rate-limited.",
                        "example": "{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"Too many requests\",\n  \"retry_after_ms\": 2000\n}"
                    }
                ],
                "title": "Changes a user's password."
            },
            {
                "deprecated": false,
                "desc": "The homeserver must check that the given email address **is\nassociated** with an account on this homeserver. This API should be\nused to request validation tokens when authenticating for the\n``/account/password`` endpoint.\n\nThis API's parameters and response are identical to that of the\n|/register/email/requestToken|_ endpoint, except that\n``M_THREEPID_NOT_FOUND`` may be returned if no account matching the\ngiven email address could be found. The server may instead send an\nemail to the given address prompting the user to create an account.\n``M_THREEPID_IN_USE`` may not be returned.\n\nThe homeserver should validate the email itself, either by sending a\nvalidation email itself or by using a service it has control over.\n\n\n.. |/register/email/requestToken| replace:: ``/register/email/requestToken``\n\n.. _/register/email/requestToken: #post-matrix-client-%CLIENT_MAJOR_VERSION%-register-email-requesttoken",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/account/password/email/requestToken HTTP/1.1\nContent-Type: application/json\n\n{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"email\": \"alice@example.org\",\n  \"send_attempt\": 1,\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"id_server\": \"id.example.com\",\n  \"id_access_token\": \"string\"\n}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/account/password/email/requestToken",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "**Required.** A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                            "key": "client_secret",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The email address to validate.",
                            "key": "email",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The server will only send an email if the ``send_attempt``\nis a number greater than the most recent one which it has seen,\nscoped to that ``email`` + ``client_secret`` pair. This is to\navoid repeatedly sending the same email in the case of request\nretries between the POSTing user and the identity server.\nThe client should increment this value if they desire a new\nemail (e.g. a reminder) to be sent. If they do not, the server\nshould respond with success but not resend the email.",
                            "key": "send_attempt",
                            "required": true,
                            "title": "integer"
                        },
                        {
                            "desc": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                            "key": "next_link",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                            "key": "id_server",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                            "key": "id_access_token",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": false,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                "key": "sid",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                "key": "submit_url",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "An email was sent to the given address.",
                        "example": "{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}"
                    },
                    {
                        "code": 400,
                        "description": "The referenced third party identifier is not recognised by the\nhomeserver, or the request was invalid. The error code ``M_SERVER_NOT_TRUSTED``\ncan be returned if the server does not trust/support the identity server\nprovided in the request.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_NOT_FOUND\",\n  \"error\": \"Email not found\"\n}"
                    },
                    {
                        "code": 403,
                        "description": "The homeserver does not allow the third party identifier as a\ncontact option.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_DENIED\",\n  \"error\": \"Third party identifier is not allowed\"\n}"
                    }
                ],
                "title": "Requests a validation token be sent to the given email address for the purpose of resetting a user's password"
            },
            {
                "deprecated": false,
                "desc": "The homeserver must check that the given phone number **is\nassociated** with an account on this homeserver. This API should be\nused to request validation tokens when authenticating for the\n``/account/password`` endpoint.\n\nThis API's parameters and response are identical to that of the\n|/register/msisdn/requestToken|_ endpoint, except that\n``M_THREEPID_NOT_FOUND`` may be returned if no account matching the\ngiven phone number could be found. The server may instead send the SMS\nto the given phone number prompting the user to create an account.\n``M_THREEPID_IN_USE`` may not be returned.\n\nThe homeserver should validate the phone number itself, either by sending a\nvalidation message itself or by using a service it has control over.\n\n.. |/register/msisdn/requestToken| replace:: ``/register/msisdn/requestToken``\n\n.. _/register/msisdn/requestToken: #post-matrix-client-%CLIENT_MAJOR_VERSION%-register-email-requesttoken",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/account/password/msisdn/requestToken HTTP/1.1\nContent-Type: application/json\n\n{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"country\": \"GB\",\n  \"phone_number\": \"07700900001\",\n  \"send_attempt\": 1,\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"id_server\": \"id.example.com\",\n  \"id_access_token\": \"string\"\n}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/account/password/msisdn/requestToken",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "**Required.** A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                            "key": "client_secret",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The two-letter uppercase ISO-3166-1 alpha-2 country code that the\nnumber in ``phone_number`` should be parsed as if it were dialled from.",
                            "key": "country",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The phone number to validate.",
                            "key": "phone_number",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The server will only send an SMS if the ``send_attempt`` is a\nnumber greater than the most recent one which it has seen,\nscoped to that ``country`` + ``phone_number`` + ``client_secret``\ntriple. This is to avoid repeatedly sending the same SMS in\nthe case of request retries between the POSTing user and the\nidentity server. The client should increment this value if\nthey desire a new SMS (e.g. a reminder) to be sent.",
                            "key": "send_attempt",
                            "required": true,
                            "title": "integer"
                        },
                        {
                            "desc": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                            "key": "next_link",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                            "key": "id_server",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                            "key": "id_access_token",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": false,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                "key": "sid",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                "key": "submit_url",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "An SMS message was sent to the given phone number.",
                        "example": "{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}"
                    },
                    {
                        "code": 400,
                        "description": "The referenced third party identifier is not recognised by the\nhomeserver, or the request was invalid. The error code ``M_SERVER_NOT_TRUSTED``\ncan be returned if the server does not trust/support the identity server\nprovided in the request.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_NOT_FOUND\",\n  \"error\": \"Phone number not found\"\n}"
                    },
                    {
                        "code": 403,
                        "description": "The homeserver does not allow the third party identifier as a\ncontact option.",
                        "example": "{\n  \"errcode\": \"M_THREEPID_DENIED\",\n  \"error\": \"Third party identifier is not allowed\"\n}"
                    }
                ],
                "title": "Requests a validation token be sent to the given phone number for the purpose of resetting a user's password."
            },
            {
                "deprecated": false,
                "desc": "Deactivate the user's account, removing all ability for the user to\nlogin again.\n\nThis API endpoint uses the `User-Interactive Authentication API`_.\n\nAn access token should be submitted to this endpoint if the client has\nan active session.\n\nThe homeserver may change the flows available depending on whether a\nvalid access token is provided.\n\nUnlike other endpoints, this endpoint does not take an ``id_access_token``\nparameter because the homeserver is expected to sign the request to the\nidentity server instead.",
                "example": {
                    "req": "POST /_matrix/client/%CLIENT_MAJOR_VERSION%/account/deactivate HTTP/1.1\nContent-Type: application/json\n\n{\n  \"auth\": {\n    \"type\": \"string\",\n    \"session\": \"string\"\n  },\n  \"id_server\": \"example.org\"\n}"
                },
                "method": "POST",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/account/deactivate",
                "rate_limited": true,
                "req_body_tables": [
                    [
                        "Authentication Data",
                        null,
                        [
                            {
                                "desc": "**Required.** The login type that the client is attempting to complete.",
                                "key": "type",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "The value of the session key given by the homeserver.",
                                "key": "session",
                                "required": false,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "Additional authentication information for the user-interactive authentication API.",
                            "key": "auth",
                            "required": false,
                            "title": "Authentication Data"
                        },
                        {
                            "desc": "The identity server to unbind all of the user's 3PIDs from.\nIf not provided, the homeserver MUST use the ``id_server``\nthat was originally use to bind each identifier. If the\nhomeserver does not know which ``id_server`` that was,\nit must return an ``id_server_unbind_result`` of\n``no-support``.",
                            "key": "id_server",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "**Required.** An indicator as to whether or not the homeserver was able to unbind\nthe user's 3PIDs from the identity server(s). ``success`` indicates\nthat all identifiers have been unbound from the identity server while\n``no-support`` indicates that one or more identifiers failed to unbind\ndue to the identity server refusing the request or the homeserver\nbeing unable to determine an identity server to unbind from. This\nmust be ``success`` if the homeserver has no identifiers to unbind\nfor the user. One of: [\"success\", \"no-support\"]",
                                "key": "id_server_unbind_result",
                                "required": true,
                                "title": "enum"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "The account has been deactivated.",
                        "example": "{\n  \"id_server_unbind_result\": \"success\"\n}"
                    },
                    {
                        "code": 401,
                        "description": "The homeserver requires additional authentication information.",
                        "example": "{\n  \"flows\": [\n    {\n      \"stages\": [\n        \"example.type.foo\"\n      ]\n    }\n  ],\n  \"params\": {\n    \"example.type.baz\": {\n      \"example_key\": \"foobar\"\n    }\n  },\n  \"session\": \"xxxxxxyz\",\n  \"completed\": [\n    \"example.type.foo\"\n  ]\n}"
                    },
                    {
                        "code": 429,
                        "description": "This request was rate-limited.",
                        "example": "{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"Too many requests\",\n  \"retry_after_ms\": 2000\n}"
                    }
                ],
                "title": "Deactivate a user's account."
            },
            {
                "deprecated": false,
                "desc": "Checks to see if a username is available, and valid, for the server.\n\nThe server should check to ensure that, at the time of the request, the\nusername requested is available for use. This includes verifying that an\napplication service has not claimed the username and that the username\nfits the server's desired requirements (for example, a server could dictate\nthat it does not permit usernames with underscores).\n\nMatrix clients may wish to use this API prior to attempting registration,\nhowever the clients must also be aware that using this API does not normally\nreserve the username. This can mean that the username becomes unavailable\nbetween checking its availability and attempting to register it.",
                "example": {
                    "req": "GET /_matrix/client/%CLIENT_MAJOR_VERSION%/register/available?username=my_cool_localpart HTTP/1.1\n\n"
                },
                "method": "GET",
                "path": "/_matrix/client/%CLIENT_MAJOR_VERSION%/register/available",
                "rate_limited": true,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "query": [
                        {
                            "desc": "**Required.** The username to check the availability of.",
                            "key": "username",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": false,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "A flag to indicate that the username is available. This should always\nbe ``true`` when the server replies with 200 OK.",
                                "key": "available",
                                "required": false,
                                "title": "boolean"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "The username is available",
                        "example": "{\n  \"available\": true\n}"
                    },
                    {
                        "code": 400,
                        "description": "Part of the request was invalid or the username is not available. This may\ninclude one of the following error codes:\n\n* ``M_USER_IN_USE`` : The desired username is already taken.\n* ``M_INVALID_USERNAME`` : The desired username is not a valid user name.\n* ``M_EXCLUSIVE`` : The desired username is in the exclusive namespace\n  claimed by an application service.",
                        "example": "{\n  \"errcode\": \"M_USER_IN_USE\",\n  \"error\": \"Desired user ID is already taken.\"\n}"
                    },
                    {
                        "code": 429,
                        "description": "This request was rate-limited.",
                        "example": "{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"Too many requests\",\n  \"retry_after_ms\": 2000\n}"
                    }
                ],
                "title": "Checks to see if a username is available on the server."
            }
        ],
        "group": "registration_cs"
    },
    "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
    "consumes": [
        "application/json"
    ],
    "host": "localhost:8008",
    "info": {
        "title": "Matrix Client-Server Registration API",
        "version": "1.0.0"
    },
    "paths": {
        "/account/deactivate": {
            "post": {
                "description": "Deactivate the user's account, removing all ability for the user to\nlogin again.\n\nThis API endpoint uses the `User-Interactive Authentication API`_.\n\nAn access token should be submitted to this endpoint if the client has\nan active session.\n\nThe homeserver may change the flows available depending on whether a\nvalid access token is provided.\n\nUnlike other endpoints, this endpoint does not take an ``id_access_token``\nparameter because the homeserver is expected to sign the request to the\nidentity server instead.",
                "operationId": "deactivateAccount",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "properties": {
                                "auth": {
                                    "allOf": [
                                        {
                                            "additionalProperties": {
                                                "description": "Keys dependent on the login type",
                                                "type": "object"
                                            },
                                            "description": "Used by clients to submit authentication information to the interactive-authentication API",
                                            "example": {
                                                "example_credential": "verypoorsharedsecret",
                                                "session": "xxxxx",
                                                "type": "example.type.foo"
                                            },
                                            "properties": {
                                                "session": {
                                                    "description": "The value of the session key given by the homeserver.",
                                                    "type": "string"
                                                },
                                                "type": {
                                                    "description": "The login type that the client is attempting to complete.",
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ],
                                            "title": "Authentication Data",
                                            "type": "object"
                                        }
                                    ],
                                    "description": "Additional authentication information for the user-interactive authentication API."
                                },
                                "id_server": {
                                    "description": "The identity server to unbind all of the user's 3PIDs from.\nIf not provided, the homeserver MUST use the ``id_server``\nthat was originally use to bind each identifier. If the\nhomeserver does not know which ``id_server`` that was,\nit must return an ``id_server_unbind_result`` of\n``no-support``.",
                                    "example": "example.org",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The account has been deactivated.",
                        "schema": {
                            "properties": {
                                "id_server_unbind_result": {
                                    "description": "An indicator as to whether or not the homeserver was able to unbind\nthe user's 3PIDs from the identity server(s). ``success`` indicates\nthat all identifiers have been unbound from the identity server while\n``no-support`` indicates that one or more identifiers failed to unbind\ndue to the identity server refusing the request or the homeserver\nbeing unable to determine an identity server to unbind from. This\nmust be ``success`` if the homeserver has no identifiers to unbind\nfor the user.",
                                    "enum": [
                                        "success",
                                        "no-support"
                                    ],
                                    "example": "success",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "id_server_unbind_result"
                            ],
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "The homeserver requires additional authentication information.",
                        "schema": {
                            "description": "Used by servers to indicate that additional authentication information is required,",
                            "properties": {
                                "completed": {
                                    "description": "A list of the stages the client has completed successfully",
                                    "items": {
                                        "example": "example.type.foo",
                                        "type": "string"
                                    },
                                    "type": "array"
                                },
                                "flows": {
                                    "description": "A list of the login flows supported by the server for this API.",
                                    "items": {
                                        "properties": {
                                            "stages": {
                                                "description": "The login type of each of the stages required to complete this\nauthentication flow",
                                                "items": {
                                                    "example": "example.type.foo",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            }
                                        },
                                        "required": [
                                            "stages"
                                        ],
                                        "type": "object"
                                    },
                                    "title": "Flow information",
                                    "type": "array"
                                },
                                "params": {
                                    "additionalProperties": {
                                        "type": "object"
                                    },
                                    "description": "Contains any information that the client will need to know in order to\nuse a given type of authentication. For each login type presented,\nthat type may be present as a key in this dictionary. For example, the\npublic part of an OAuth client ID could be given here.",
                                    "example": {
                                        "example.type.baz": {
                                            "example_key": "foobar"
                                        }
                                    },
                                    "type": "object"
                                },
                                "session": {
                                    "description": "This is a session identifier that the client must pass back to the home\nserver, if one is provided, in subsequent attempts to authenticate in the\nsame API call.",
                                    "example": "xxxxxxyz",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "flows"
                            ],
                            "title": "Authentication response",
                            "type": "object"
                        }
                    },
                    "429": {
                        "description": "This request was rate-limited.",
                        "schema": {
                            "description": "The rate limit was reached for this request",
                            "properties": {
                                "errcode": {
                                    "description": "The M_LIMIT_EXCEEDED error code",
                                    "example": "M_LIMIT_EXCEEDED",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "Too many requests",
                                    "type": "string"
                                },
                                "retry_after_ms": {
                                    "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                                    "example": 2000,
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "security": [
                    {
                        "accessToken": []
                    }
                ],
                "summary": "Deactivate a user's account.",
                "tags": [
                    "User data"
                ]
            }
        },
        "/account/password": {
            "post": {
                "description": "Changes the password for an account on this homeserver.\n\nThis API endpoint uses the `User-Interactive Authentication API`_ to\nensure the user changing the password is actually the owner of the\naccount.\n\nAn access token should be submitted to this endpoint if the client has\nan active session.\n\nThe homeserver may change the flows available depending on whether a\nvalid access token is provided. The homeserver SHOULD NOT revoke the\naccess token provided in the request. Whether other access tokens for\nthe user are revoked depends on the request parameters.",
                "operationId": "changePassword",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "properties": {
                                "auth": {
                                    "allOf": [
                                        {
                                            "additionalProperties": {
                                                "description": "Keys dependent on the login type",
                                                "type": "object"
                                            },
                                            "description": "Used by clients to submit authentication information to the interactive-authentication API",
                                            "example": {
                                                "example_credential": "verypoorsharedsecret",
                                                "session": "xxxxx",
                                                "type": "example.type.foo"
                                            },
                                            "properties": {
                                                "session": {
                                                    "description": "The value of the session key given by the homeserver.",
                                                    "type": "string"
                                                },
                                                "type": {
                                                    "description": "The login type that the client is attempting to complete.",
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ],
                                            "title": "Authentication Data",
                                            "type": "object"
                                        }
                                    ],
                                    "description": "Additional authentication information for the user-interactive authentication API."
                                },
                                "logout_devices": {
                                    "description": "Whether the user's other access tokens, and their associated devices, should be\nrevoked if the request succeeds. Defaults to true.\n\nWhen ``false``, the server can still take advantage of `the soft logout method <#soft-logout>`_\nfor the user's remaining devices.",
                                    "example": true,
                                    "type": "boolean"
                                },
                                "new_password": {
                                    "description": "The new password for the account.",
                                    "example": "ihatebananas",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "new_password"
                            ],
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The password has been changed.",
                        "examples": {
                            "application/json": {}
                        },
                        "schema": {
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "The homeserver requires additional authentication information.",
                        "schema": {
                            "description": "Used by servers to indicate that additional authentication information is required,",
                            "properties": {
                                "completed": {
                                    "description": "A list of the stages the client has completed successfully",
                                    "items": {
                                        "example": "example.type.foo",
                                        "type": "string"
                                    },
                                    "type": "array"
                                },
                                "flows": {
                                    "description": "A list of the login flows supported by the server for this API.",
                                    "items": {
                                        "properties": {
                                            "stages": {
                                                "description": "The login type of each of the stages required to complete this\nauthentication flow",
                                                "items": {
                                                    "example": "example.type.foo",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            }
                                        },
                                        "required": [
                                            "stages"
                                        ],
                                        "type": "object"
                                    },
                                    "title": "Flow information",
                                    "type": "array"
                                },
                                "params": {
                                    "additionalProperties": {
                                        "type": "object"
                                    },
                                    "description": "Contains any information that the client will need to know in order to\nuse a given type of authentication. For each login type presented,\nthat type may be present as a key in this dictionary. For example, the\npublic part of an OAuth client ID could be given here.",
                                    "example": {
                                        "example.type.baz": {
                                            "example_key": "foobar"
                                        }
                                    },
                                    "type": "object"
                                },
                                "session": {
                                    "description": "This is a session identifier that the client must pass back to the home\nserver, if one is provided, in subsequent attempts to authenticate in the\nsame API call.",
                                    "example": "xxxxxxyz",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "flows"
                            ],
                            "title": "Authentication response",
                            "type": "object"
                        }
                    },
                    "429": {
                        "description": "This request was rate-limited.",
                        "schema": {
                            "description": "The rate limit was reached for this request",
                            "properties": {
                                "errcode": {
                                    "description": "The M_LIMIT_EXCEEDED error code",
                                    "example": "M_LIMIT_EXCEEDED",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "Too many requests",
                                    "type": "string"
                                },
                                "retry_after_ms": {
                                    "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                                    "example": 2000,
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "security": [
                    {
                        "accessToken": []
                    }
                ],
                "summary": "Changes a user's password.",
                "tags": [
                    "User data"
                ]
            }
        },
        "/account/password/email/requestToken": {
            "post": {
                "description": "The homeserver must check that the given email address **is\nassociated** with an account on this homeserver. This API should be\nused to request validation tokens when authenticating for the\n``/account/password`` endpoint.\n\nThis API's parameters and response are identical to that of the\n|/register/email/requestToken|_ endpoint, except that\n``M_THREEPID_NOT_FOUND`` may be returned if no account matching the\ngiven email address could be found. The server may instead send an\nemail to the given address prompting the user to create an account.\n``M_THREEPID_IN_USE`` may not be returned.\n\nThe homeserver should validate the email itself, either by sending a\nvalidation email itself or by using a service it has control over.\n\n\n.. |/register/email/requestToken| replace:: ``/register/email/requestToken``\n\n.. _/register/email/requestToken: #post-matrix-client-%CLIENT_MAJOR_VERSION%-register-email-requesttoken",
                "operationId": "requestTokenToResetPasswordEmail",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "allOf": [
                                {
                                    "example": {
                                        "client_secret": "monkeys_are_GREAT",
                                        "email": "foo@example.com",
                                        "send_attempt": 1
                                    },
                                    "properties": {
                                        "client_secret": {
                                            "description": "A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                                            "example": "monkeys_are_GREAT",
                                            "type": "string"
                                        },
                                        "email": {
                                            "description": "The email address to validate.",
                                            "example": "alice@example.org",
                                            "type": "string"
                                        },
                                        "next_link": {
                                            "description": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                                            "example": "https://example.org/congratulations.html",
                                            "type": "string"
                                        },
                                        "send_attempt": {
                                            "description": "The server will only send an email if the ``send_attempt``\nis a number greater than the most recent one which it has seen,\nscoped to that ``email`` + ``client_secret`` pair. This is to\navoid repeatedly sending the same email in the case of request\nretries between the POSTing user and the identity server.\nThe client should increment this value if they desire a new\nemail (e.g. a reminder) to be sent. If they do not, the server\nshould respond with success but not resend the email.",
                                            "example": 1,
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "client_secret",
                                        "email",
                                        "send_attempt"
                                    ],
                                    "type": "object"
                                },
                                {
                                    "properties": {
                                        "id_access_token": {
                                            "description": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                                            "type": "string"
                                        },
                                        "id_server": {
                                            "description": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                                            "example": "id.example.com",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            ],
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "An email was sent to the given address.",
                        "schema": {
                            "properties": {
                                "sid": {
                                    "description": "The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                    "example": "123abc",
                                    "type": "string"
                                },
                                "submit_url": {
                                    "description": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                    "example": "https://example.org/path/to/submitToken",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "sid"
                            ],
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "The referenced third party identifier is not recognised by the\nhomeserver, or the request was invalid. The error code ``M_SERVER_NOT_TRUSTED``\ncan be returned if the server does not trust/support the identity server\nprovided in the request.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_NOT_FOUND",
                                "error": "Email not found"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "403": {
                        "description": "The homeserver does not allow the third party identifier as a\ncontact option.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_DENIED",
                                "error": "Third party identifier is not allowed"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "summary": "Requests a validation token be sent to the given email address for the purpose of resetting a user's password"
            }
        },
        "/account/password/msisdn/requestToken": {
            "post": {
                "description": "The homeserver must check that the given phone number **is\nassociated** with an account on this homeserver. This API should be\nused to request validation tokens when authenticating for the\n``/account/password`` endpoint.\n\nThis API's parameters and response are identical to that of the\n|/register/msisdn/requestToken|_ endpoint, except that\n``M_THREEPID_NOT_FOUND`` may be returned if no account matching the\ngiven phone number could be found. The server may instead send the SMS\nto the given phone number prompting the user to create an account.\n``M_THREEPID_IN_USE`` may not be returned.\n\nThe homeserver should validate the phone number itself, either by sending a\nvalidation message itself or by using a service it has control over.\n\n.. |/register/msisdn/requestToken| replace:: ``/register/msisdn/requestToken``\n\n.. _/register/msisdn/requestToken: #post-matrix-client-%CLIENT_MAJOR_VERSION%-register-email-requesttoken",
                "operationId": "requestTokenToResetPasswordMSISDN",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "allOf": [
                                {
                                    "example": {
                                        "client_secret": "monkeys_are_GREAT",
                                        "country": "GB",
                                        "phone_number": "07700900001",
                                        "send_attempt": 1
                                    },
                                    "properties": {
                                        "client_secret": {
                                            "description": "A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                                            "example": "monkeys_are_GREAT",
                                            "type": "string"
                                        },
                                        "country": {
                                            "description": "The two-letter uppercase ISO-3166-1 alpha-2 country code that the\nnumber in ``phone_number`` should be parsed as if it were dialled from.",
                                            "example": "GB",
                                            "type": "string"
                                        },
                                        "next_link": {
                                            "description": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                                            "example": "https://example.org/congratulations.html",
                                            "type": "string"
                                        },
                                        "phone_number": {
                                            "description": "The phone number to validate.",
                                            "example": "07700900001",
                                            "type": "string"
                                        },
                                        "send_attempt": {
                                            "description": "The server will only send an SMS if the ``send_attempt`` is a\nnumber greater than the most recent one which it has seen,\nscoped to that ``country`` + ``phone_number`` + ``client_secret``\ntriple. This is to avoid repeatedly sending the same SMS in\nthe case of request retries between the POSTing user and the\nidentity server. The client should increment this value if\nthey desire a new SMS (e.g. a reminder) to be sent.",
                                            "example": 1,
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "client_secret",
                                        "country",
                                        "phone_number",
                                        "send_attempt"
                                    ],
                                    "type": "object"
                                },
                                {
                                    "properties": {
                                        "id_access_token": {
                                            "description": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                                            "type": "string"
                                        },
                                        "id_server": {
                                            "description": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                                            "example": "id.example.com",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            ],
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "An SMS message was sent to the given phone number.",
                        "schema": {
                            "properties": {
                                "sid": {
                                    "description": "The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                    "example": "123abc",
                                    "type": "string"
                                },
                                "submit_url": {
                                    "description": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                    "example": "https://example.org/path/to/submitToken",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "sid"
                            ],
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "The referenced third party identifier is not recognised by the\nhomeserver, or the request was invalid. The error code ``M_SERVER_NOT_TRUSTED``\ncan be returned if the server does not trust/support the identity server\nprovided in the request.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_NOT_FOUND",
                                "error": "Phone number not found"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "403": {
                        "description": "The homeserver does not allow the third party identifier as a\ncontact option.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_DENIED",
                                "error": "Third party identifier is not allowed"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "summary": "Requests a validation token be sent to the given phone number for the purpose of resetting a user's password."
            }
        },
        "/register": {
            "post": {
                "description": "This API endpoint uses the `User-Interactive Authentication API`_, except in\nthe cases where a guest account is being registered.\n\nRegister for an account on this homeserver.\n\nThere are two kinds of user account:\n\n- `user` accounts. These accounts may use the full API described in this specification.\n\n- `guest` accounts. These accounts may have limited permissions and may not be supported by all servers.\n\nIf registration is successful, this endpoint will issue an access token\nthe client can use to authorize itself in subsequent requests.\n\nIf the client does not supply a ``device_id``, the server must\nauto-generate one.\n\nThe server SHOULD register an account with a User ID based on the\n``username`` provided, if any. Note that the grammar of Matrix User ID\nlocalparts is restricted, so the server MUST either map the provided\n``username`` onto a ``user_id`` in a logical manner, or reject\n``username``\\s which do not comply to the grammar, with\n``M_INVALID_USERNAME``.\n\nMatrix clients MUST NOT assume that localpart of the registered\n``user_id`` matches the provided ``username``.\n\nThe returned access token must be associated with the ``device_id``\nsupplied by the client or generated by the server. The server may\ninvalidate any access token previously associated with that device. See\n`Relationship between access tokens and devices`_.\n\nWhen registering a guest account, all parameters in the request body\nwith the exception of ``initial_device_display_name`` MUST BE ignored\nby the server. The server MUST pick a ``device_id`` for the account\nregardless of input.\n\nAny user ID returned by this API must conform to the grammar given in the\n`Matrix specification <../appendices.html#user-identifiers>`_.",
                "operationId": "register",
                "parameters": [
                    {
                        "default": "user",
                        "description": "The kind of account to register. Defaults to ``user``.",
                        "enum": [
                            "guest",
                            "user"
                        ],
                        "in": "query",
                        "name": "kind",
                        "required": false,
                        "type": "string",
                        "x-example": "user"
                    },
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "properties": {
                                "auth": {
                                    "allOf": [
                                        {
                                            "additionalProperties": {
                                                "description": "Keys dependent on the login type",
                                                "type": "object"
                                            },
                                            "description": "Used by clients to submit authentication information to the interactive-authentication API",
                                            "example": {
                                                "example_credential": "verypoorsharedsecret",
                                                "session": "xxxxx",
                                                "type": "example.type.foo"
                                            },
                                            "properties": {
                                                "session": {
                                                    "description": "The value of the session key given by the homeserver.",
                                                    "type": "string"
                                                },
                                                "type": {
                                                    "description": "The login type that the client is attempting to complete.",
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "type"
                                            ],
                                            "title": "Authentication Data",
                                            "type": "object"
                                        }
                                    ],
                                    "description": "Additional authentication information for the\nuser-interactive authentication API. Note that this\ninformation is *not* used to define how the registered user\nshould be authenticated, but is instead used to\nauthenticate the ``register`` call itself."
                                },
                                "device_id": {
                                    "description": "ID of the client device. If this does not correspond to a\nknown client device, a new device will be created. The server\nwill auto-generate a device_id if this is not specified.",
                                    "example": "GHTYAJCE",
                                    "type": "string"
                                },
                                "inhibit_login": {
                                    "description": "If true, an ``access_token`` and ``device_id`` should not be\nreturned from this call, therefore preventing an automatic\nlogin. Defaults to false.",
                                    "example": false,
                                    "type": "boolean"
                                },
                                "initial_device_display_name": {
                                    "description": "A display name to assign to the newly-created device. Ignored\nif ``device_id`` corresponds to a known device.",
                                    "example": "Jungle Phone",
                                    "type": "string"
                                },
                                "password": {
                                    "description": "The desired password for the account.",
                                    "example": "ilovebananas",
                                    "type": "string"
                                },
                                "username": {
                                    "description": "The basis for the localpart of the desired Matrix ID. If omitted,\nthe homeserver MUST generate a Matrix ID local part.",
                                    "example": "cheeky_monkey",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The account has been registered.",
                        "examples": {
                            "application/json": {
                                "access_token": "abc123",
                                "device_id": "GHTYAJCE",
                                "user_id": "@cheeky_monkey:matrix.org"
                            }
                        },
                        "schema": {
                            "properties": {
                                "access_token": {
                                    "description": "An access token for the account.\nThis access token can then be used to authorize other requests.\nRequired if the ``inhibit_login`` option is false.",
                                    "type": "string"
                                },
                                "device_id": {
                                    "description": "ID of the registered device. Will be the same as the\ncorresponding parameter in the request, if one was specified.\nRequired if the ``inhibit_login`` option is false.",
                                    "type": "string"
                                },
                                "home_server": {
                                    "description": "The server_name of the homeserver on which the account has\nbeen registered.\n\n**Deprecated**. Clients should extract the server_name from\n``user_id`` (by splitting at the first colon) if they require\nit. Note also that ``homeserver`` is not spelt this way.",
                                    "type": "string"
                                },
                                "user_id": {
                                    "description": "The fully-qualified Matrix user ID (MXID) that has been registered.\n\nAny user ID returned by this API must conform to the grammar given in the\n`Matrix specification <../appendices.html#user-identifiers>`_.",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "user_id"
                            ],
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Part of the request was invalid. This may include one of the following error codes:\n\n* ``M_USER_IN_USE`` : The desired user ID is already taken.\n* ``M_INVALID_USERNAME`` : The desired user ID is not a valid user name.\n* ``M_EXCLUSIVE`` : The desired user ID is in the exclusive namespace\n  claimed by an application service.\n\nThese errors may be returned at any stage of the registration process,\nincluding after authentication if the requested user ID was registered\nwhilst the client was performing authentication.\n\nHomeservers MUST perform the relevant checks and return these codes before\nperforming User-Interactive Authentication, although they may also return\nthem after authentication is completed if, for example, the requested user ID\nwas registered whilst the client was performing authentication.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_USER_IN_USE",
                                "error": "Desired user ID is already taken."
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "401": {
                        "description": "The homeserver requires additional authentication information.",
                        "schema": {
                            "description": "Used by servers to indicate that additional authentication information is required,",
                            "properties": {
                                "completed": {
                                    "description": "A list of the stages the client has completed successfully",
                                    "items": {
                                        "example": "example.type.foo",
                                        "type": "string"
                                    },
                                    "type": "array"
                                },
                                "flows": {
                                    "description": "A list of the login flows supported by the server for this API.",
                                    "items": {
                                        "properties": {
                                            "stages": {
                                                "description": "The login type of each of the stages required to complete this\nauthentication flow",
                                                "items": {
                                                    "example": "example.type.foo",
                                                    "type": "string"
                                                },
                                                "type": "array"
                                            }
                                        },
                                        "required": [
                                            "stages"
                                        ],
                                        "type": "object"
                                    },
                                    "title": "Flow information",
                                    "type": "array"
                                },
                                "params": {
                                    "additionalProperties": {
                                        "type": "object"
                                    },
                                    "description": "Contains any information that the client will need to know in order to\nuse a given type of authentication. For each login type presented,\nthat type may be present as a key in this dictionary. For example, the\npublic part of an OAuth client ID could be given here.",
                                    "example": {
                                        "example.type.baz": {
                                            "example_key": "foobar"
                                        }
                                    },
                                    "type": "object"
                                },
                                "session": {
                                    "description": "This is a session identifier that the client must pass back to the home\nserver, if one is provided, in subsequent attempts to authenticate in the\nsame API call.",
                                    "example": "xxxxxxyz",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "flows"
                            ],
                            "title": "Authentication response",
                            "type": "object"
                        }
                    },
                    "403": {
                        "description": "The homeserver does not permit registering the account. This response\ncan be used to identify that a particular ``kind`` of account is not\nallowed, or that registration is generally not supported by the homeserver.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_FORBIDDEN",
                                "error": "Registration is disabled"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "429": {
                        "description": "This request was rate-limited.",
                        "schema": {
                            "description": "The rate limit was reached for this request",
                            "properties": {
                                "errcode": {
                                    "description": "The M_LIMIT_EXCEEDED error code",
                                    "example": "M_LIMIT_EXCEEDED",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "Too many requests",
                                    "type": "string"
                                },
                                "retry_after_ms": {
                                    "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                                    "example": 2000,
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "summary": "Register for an account on this homeserver.",
                "tags": [
                    "User data"
                ]
            }
        },
        "/register/available": {
            "get": {
                "description": "Checks to see if a username is available, and valid, for the server.\n\nThe server should check to ensure that, at the time of the request, the\nusername requested is available for use. This includes verifying that an\napplication service has not claimed the username and that the username\nfits the server's desired requirements (for example, a server could dictate\nthat it does not permit usernames with underscores).\n\nMatrix clients may wish to use this API prior to attempting registration,\nhowever the clients must also be aware that using this API does not normally\nreserve the username. This can mean that the username becomes unavailable\nbetween checking its availability and attempting to register it.",
                "operationId": "checkUsernameAvailability",
                "parameters": [
                    {
                        "default": "my_cool_localpart",
                        "description": "The username to check the availability of.",
                        "in": "query",
                        "name": "username",
                        "required": true,
                        "type": "string",
                        "x-example": "my_cool_localpart"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "The username is available",
                        "examples": {
                            "application/json": {
                                "available": true
                            }
                        },
                        "schema": {
                            "properties": {
                                "available": {
                                    "description": "A flag to indicate that the username is available. This should always\nbe ``true`` when the server replies with 200 OK.",
                                    "type": "boolean"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Part of the request was invalid or the username is not available. This may\ninclude one of the following error codes:\n\n* ``M_USER_IN_USE`` : The desired username is already taken.\n* ``M_INVALID_USERNAME`` : The desired username is not a valid user name.\n* ``M_EXCLUSIVE`` : The desired username is in the exclusive namespace\n  claimed by an application service.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_USER_IN_USE",
                                "error": "Desired user ID is already taken."
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "429": {
                        "description": "This request was rate-limited.",
                        "schema": {
                            "description": "The rate limit was reached for this request",
                            "properties": {
                                "errcode": {
                                    "description": "The M_LIMIT_EXCEEDED error code",
                                    "example": "M_LIMIT_EXCEEDED",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "Too many requests",
                                    "type": "string"
                                },
                                "retry_after_ms": {
                                    "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                                    "example": 2000,
                                    "type": "integer"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "summary": "Checks to see if a username is available on the server.",
                "tags": [
                    "User data"
                ]
            }
        },
        "/register/email/requestToken": {
            "post": {
                "description": "The homeserver must check that the given email address is **not**\nalready associated with an account on this homeserver. The homeserver\nshould validate the email itself, either by sending a validation email\nitself or by using a service it has control over.",
                "operationId": "requestTokenToRegisterEmail",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "allOf": [
                                {
                                    "example": {
                                        "client_secret": "monkeys_are_GREAT",
                                        "email": "foo@example.com",
                                        "send_attempt": 1
                                    },
                                    "properties": {
                                        "client_secret": {
                                            "description": "A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                                            "example": "monkeys_are_GREAT",
                                            "type": "string"
                                        },
                                        "email": {
                                            "description": "The email address to validate.",
                                            "example": "alice@example.org",
                                            "type": "string"
                                        },
                                        "next_link": {
                                            "description": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                                            "example": "https://example.org/congratulations.html",
                                            "type": "string"
                                        },
                                        "send_attempt": {
                                            "description": "The server will only send an email if the ``send_attempt``\nis a number greater than the most recent one which it has seen,\nscoped to that ``email`` + ``client_secret`` pair. This is to\navoid repeatedly sending the same email in the case of request\nretries between the POSTing user and the identity server.\nThe client should increment this value if they desire a new\nemail (e.g. a reminder) to be sent. If they do not, the server\nshould respond with success but not resend the email.",
                                            "example": 1,
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "client_secret",
                                        "email",
                                        "send_attempt"
                                    ],
                                    "type": "object"
                                },
                                {
                                    "properties": {
                                        "id_access_token": {
                                            "description": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                                            "type": "string"
                                        },
                                        "id_server": {
                                            "description": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                                            "example": "id.example.com",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            ],
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "An email has been sent to the specified address. Note that this\nmay be an email containing the validation token or it may be\ninforming the user of an error.",
                        "schema": {
                            "properties": {
                                "sid": {
                                    "description": "The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                    "example": "123abc",
                                    "type": "string"
                                },
                                "submit_url": {
                                    "description": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                    "example": "https://example.org/path/to/submitToken",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "sid"
                            ],
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Part of the request was invalid. This may include one of the following error codes:\n\n* ``M_THREEPID_IN_USE`` : The email address is already registered to an account on this server.\n  However, if the homeserver has the ability to send email, it is recommended that the server\n  instead send an email to the user with instructions on how to reset their password.\n  This prevents malicious parties from being able to determine if a given email address\n  has an account on the homeserver in question.\n* ``M_SERVER_NOT_TRUSTED`` : The ``id_server`` parameter refers to an identity server\n  that is not trusted by this homeserver.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_IN_USE",
                                "error": "The specified address is already in use"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "403": {
                        "description": "The homeserver does not permit the address to be bound.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_DENIED",
                                "error": "Third party identifier is not allowed"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "summary": "Begins the validation process for an email to be used during registration."
            }
        },
        "/register/msisdn/requestToken": {
            "post": {
                "description": "The homeserver must check that the given phone number is **not**\nalready associated with an account on this homeserver. The homeserver\nshould validate the phone number itself, either by sending a validation\nmessage itself or by using a service it has control over.",
                "operationId": "requestTokenToRegisterMSISDN",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "allOf": [
                                {
                                    "example": {
                                        "client_secret": "monkeys_are_GREAT",
                                        "country": "GB",
                                        "phone_number": "07700900001",
                                        "send_attempt": 1
                                    },
                                    "properties": {
                                        "client_secret": {
                                            "description": "A unique string generated by the client, and used to identify the\nvalidation attempt. It must be a string consisting of the characters\n``[0-9a-zA-Z.=_-]``. Its length must not exceed 255 characters and it\nmust not be empty.\n",
                                            "example": "monkeys_are_GREAT",
                                            "type": "string"
                                        },
                                        "country": {
                                            "description": "The two-letter uppercase ISO-3166-1 alpha-2 country code that the\nnumber in ``phone_number`` should be parsed as if it were dialled from.",
                                            "example": "GB",
                                            "type": "string"
                                        },
                                        "next_link": {
                                            "description": "Optional. When the validation is completed, the identity server will\nredirect the user to this URL. This option is ignored when submitting\n3PID validation information through a POST request.",
                                            "example": "https://example.org/congratulations.html",
                                            "type": "string"
                                        },
                                        "phone_number": {
                                            "description": "The phone number to validate.",
                                            "example": "07700900001",
                                            "type": "string"
                                        },
                                        "send_attempt": {
                                            "description": "The server will only send an SMS if the ``send_attempt`` is a\nnumber greater than the most recent one which it has seen,\nscoped to that ``country`` + ``phone_number`` + ``client_secret``\ntriple. This is to avoid repeatedly sending the same SMS in\nthe case of request retries between the POSTing user and the\nidentity server. The client should increment this value if\nthey desire a new SMS (e.g. a reminder) to be sent.",
                                            "example": 1,
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "client_secret",
                                        "country",
                                        "phone_number",
                                        "send_attempt"
                                    ],
                                    "type": "object"
                                },
                                {
                                    "properties": {
                                        "id_access_token": {
                                            "description": "An access token previously registered with the identity server. Servers\ncan treat this as optional to distinguish between r0.5-compatible clients\nand this specification version.\n\nRequired if an ``id_server`` is supplied.",
                                            "type": "string"
                                        },
                                        "id_server": {
                                            "description": "The hostname of the identity server to communicate with. May optionally\ninclude a port. This parameter is ignored when the homeserver handles\n3PID verification.\n\nThis parameter is deprecated with a plan to be removed in a future specification\nversion for ``/account/password`` and ``/register`` requests.",
                                            "example": "id.example.com",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            ],
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "An SMS message has been sent to the specified phone number. Note\nthat this may be an SMS message containing the validation token or\nit may be informing the user of an error.",
                        "schema": {
                            "properties": {
                                "sid": {
                                    "description": "The session ID. Session IDs are opaque strings that must consist entirely\nof the characters ``[0-9a-zA-Z.=_-]``. Their length must not exceed 255\ncharacters and they must not be empty.",
                                    "example": "123abc",
                                    "type": "string"
                                },
                                "submit_url": {
                                    "description": "An optional field containing a URL where the client must submit the\nvalidation token to, with identical parameters to the Identity Service\nAPI's ``POST /validate/email/submitToken`` endpoint (without the requirement\nfor an access token). The homeserver must send this token to the user (if\napplicable), who should then be prompted to provide it to the client.\n\nIf this field is not present, the client can assume that verification\nwill happen without the client's involvement provided the homeserver\nadvertises this specification version in the ``/versions`` response\n(ie: r0.5.0).",
                                    "example": "https://example.org/path/to/submitToken",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "sid"
                            ],
                            "type": "object"
                        }
                    },
                    "400": {
                        "description": "Part of the request was invalid. This may include one of the following error codes:\n\n* ``M_THREEPID_IN_USE`` : The phone number is already registered to an account on this server.\n  However, if the homeserver has the ability to send SMS message, it is recommended that the server\n  instead send an SMS message to the user with instructions on how to reset their password.\n  This prevents malicious parties from being able to determine if a given phone number\n  has an account on the homeserver in question.\n* ``M_SERVER_NOT_TRUSTED`` : The ``id_server`` parameter refers to an identity server\n  that is not trusted by this homeserver.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_IN_USE",
                                "error": "The specified address is already in use"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    },
                    "403": {
                        "description": "The homeserver does not permit the address to be bound.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_THREEPID_DENIED",
                                "error": "Third party identifier is not allowed"
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "summary": "Requests a validation token be sent to the given phone number for the purpose of registering an account"
            }
        }
    },
    "produces": [
        "application/json"
    ],
    "schemes": [
        "https",
        "http"
    ],
    "swagger": "2.0"
}