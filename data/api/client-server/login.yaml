[
    {
        "additional_types": [
            {
                "name": "LoginFlow",
                "properties": [
                    {
                        "description": "The login type. This is supplied as the ``type`` when\nlogging in.",
                        "name": "type",
                        "required": false,
                        "type": "string"
                    }
                ]
            }
        ],
        "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "description": "Gets the homeserver's supported login types to authenticate users. Clients\nshould pick one of these and supply it as the ``type`` when logging in.",
        "method": "GET",
        "parameters": {},
        "path": "/login",
        "rate_limited": true,
        "requires_auth": false,
        "responses": [
            {
                "description": "The login types the homeserver supports",
                "examples": {
                    "application/json": {
                        "flows": [
                            {
                                "type": "m.login.password"
                            }
                        ]
                    }
                },
                "parameters": [
                    {
                        "description": "The homeserver's supported login types",
                        "name": "flows",
                        "required": false,
                        "type": "[LoginFlow]"
                    }
                ],
                "required": false,
                "status": 200
            },
            {
                "description": "This request was rate-limited.",
                "examples": "",
                "parameters": [
                    {
                        "description": "The M_LIMIT_EXCEEDED error code",
                        "name": "errcode",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "A human-readable error message.",
                        "name": "error",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                        "name": "retry_after_ms",
                        "required": false,
                        "type": "integer"
                    }
                ],
                "required": false,
                "status": 429
            }
        ],
        "summary": "Get the supported login types to authenticate users"
    },
    {
        "additional_types": [
            {
                "name": "User identifier",
                "properties": [
                    {
                        "description": "The type of identification.  See `Identifier types`_ for supported values and additional property descriptions.",
                        "name": "type",
                        "required": true,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "Homeserver Information",
                "properties": [
                    {
                        "description": "The base URL for the homeserver for client-server connections.",
                        "name": "base_url",
                        "required": true,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "Identity Server Information",
                "properties": [
                    {
                        "description": "The base URL for the identity server for client-server connections.",
                        "name": "base_url",
                        "required": true,
                        "type": "string"
                    }
                ]
            },
            {
                "name": "Discovery Information",
                "properties": [
                    {
                        "description": "Used by clients to discover homeserver information.",
                        "name": "m.homeserver",
                        "required": true,
                        "type": "Homeserver Information"
                    },
                    {
                        "description": "Used by clients to discover identity server information.",
                        "name": "m.identity_server",
                        "required": false,
                        "type": "Identity Server Information"
                    }
                ]
            }
        ],
        "basePath": "/_matrix/client/%CLIENT_MAJOR_VERSION%",
        "description": "Authenticates the user, and issues an access token they can\nuse to authorize themself in subsequent requests.\n\nIf the client does not supply a ``device_id``, the server must\nauto-generate one.\n\nThe returned access token must be associated with the ``device_id``\nsupplied by the client or generated by the server. The server may\ninvalidate any access token previously associated with that device. See\n`Relationship between access tokens and devices`_.",
        "method": "POST",
        "parameters": {
            "Body": [
                {
                    "description": "The login type being used.",
                    "name": "type",
                    "required": true,
                    "type": "string"
                },
                {
                    "description": "Identification information for a user",
                    "name": "identifier",
                    "required": false,
                    "type": "User identifier"
                },
                {
                    "description": "The fully qualified user ID or just local part of the user ID, to log in.  Deprecated in favour of ``identifier``.",
                    "name": "user",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "When logging in using a third party identifier, the medium of the identifier. Must be 'email'.  Deprecated in favour of ``identifier``.",
                    "name": "medium",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "Third party identifier for the user.  Deprecated in favour of ``identifier``.",
                    "name": "address",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "Required when ``type`` is ``m.login.password``. The user's\npassword.",
                    "name": "password",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "Required when ``type`` is ``m.login.token``. Part of `Token-based`_ login.",
                    "name": "token",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "ID of the client device. If this does not correspond to a\nknown client device, a new device will be created. The server\nwill auto-generate a device_id if this is not specified.",
                    "name": "device_id",
                    "required": false,
                    "type": "string"
                },
                {
                    "description": "A display name to assign to the newly-created device. Ignored\nif ``device_id`` corresponds to a known device.",
                    "name": "initial_device_display_name",
                    "required": false,
                    "type": "string"
                }
            ]
        },
        "path": "/login",
        "rate_limited": true,
        "requires_auth": false,
        "responses": [
            {
                "description": "The user has been authenticated.",
                "examples": {
                    "application/json": {
                        "access_token": "abc123",
                        "device_id": "GHTYAJCE",
                        "user_id": "@cheeky_monkey:matrix.org",
                        "well_known": {
                            "m.homeserver": {
                                "base_url": "https://example.org"
                            },
                            "m.identity_server": {
                                "base_url": "https://id.example.org"
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "description": "The fully-qualified Matrix ID for the account.",
                        "name": "user_id",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "An access token for the account.\nThis access token can then be used to authorize other requests.",
                        "name": "access_token",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The server_name of the homeserver on which the account has\nbeen registered.\n\n**Deprecated**. Clients should extract the server_name from\n``user_id`` (by splitting at the first colon) if they require\nit. Note also that ``homeserver`` is not spelt this way.",
                        "name": "home_server",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "ID of the logged-in device. Will be the same as the\ncorresponding parameter in the request, if one was specified.",
                        "name": "device_id",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "Optional client configuration provided by the server. If present,\nclients SHOULD use the provided object to reconfigure themselves,\noptionally validating the URLs within. This object takes the same\nform as the one returned from .well-known autodiscovery.",
                        "name": "well_known",
                        "required": false,
                        "type": "Discovery Information"
                    }
                ],
                "required": false,
                "status": 200
            },
            {
                "description": "Part of the request was invalid. For example, the login type may not be recognised.",
                "examples": {
                    "application/json": {
                        "errcode": "M_UNKNOWN",
                        "error": "Bad login type."
                    }
                },
                "parameters": [
                    {
                        "description": "An error code.",
                        "name": "errcode",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "A human-readable error message.",
                        "name": "error",
                        "required": false,
                        "type": "string"
                    }
                ],
                "required": false,
                "status": 400
            },
            {
                "description": "The login attempt failed. This can include one of the following error codes:\n  * ``M_FORBIDDEN``: The provided authentication data was incorrect.\n  * ``M_USER_DEACTIVATED``: The user has been deactivated.",
                "examples": {
                    "application/json": {
                        "errcode": "M_FORBIDDEN"
                    }
                },
                "parameters": [
                    {
                        "description": "An error code.",
                        "name": "errcode",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "A human-readable error message.",
                        "name": "error",
                        "required": false,
                        "type": "string"
                    }
                ],
                "required": false,
                "status": 403
            },
            {
                "description": "This request was rate-limited.",
                "examples": "",
                "parameters": [
                    {
                        "description": "The M_LIMIT_EXCEEDED error code",
                        "name": "errcode",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "description": "A human-readable error message.",
                        "name": "error",
                        "required": false,
                        "type": "string"
                    },
                    {
                        "description": "The amount of time in milliseconds the client should wait\nbefore trying the request again.",
                        "name": "retry_after_ms",
                        "required": false,
                        "type": "integer"
                    }
                ],
                "required": false,
                "status": 429
            }
        ],
        "summary": "Authenticates the user."
    }
]