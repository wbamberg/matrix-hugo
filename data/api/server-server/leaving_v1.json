{
    "__meta": {
        "base": "/_matrix/federation/v1",
        "endpoints": [
            {
                "deprecated": false,
                "desc": "Asks the receiving server to return information that the sending\nserver will need to prepare a leave event to get out of the room.",
                "example": {
                    "req": "GET /_matrix/federation/v1/make_leave/%21abc123%3Amatrix.org/%40someone%3Aexample.org HTTP/1.1\n\n"
                },
                "method": "GET",
                "path": "/_matrix/federation/v1/make_leave/{roomId}/{userId}",
                "rate_limited": false,
                "req_body_tables": [],
                "req_param_by_loc": {
                    "path": [
                        {
                            "desc": "**Required.** The room ID that is about to be left.",
                            "key": "roomId",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The user ID the leave event will be for.",
                            "key": "userId",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "The version of the room where the server is trying to leave. If not provided,\nthe room version is assumed to be either \"1\" or \"2\".",
                                "key": "room_version",
                                "required": false,
                                "title": "string"
                            },
                            {
                                "desc": "An unsigned template event. Note that events have a different format\ndepending on the room version - check the `room version specification`_\nfor precise event formats.",
                                "key": "event",
                                "required": false,
                                "title": "Event Template"
                            }
                        ]
                    ],
                    [
                        "Event Template",
                        null,
                        [
                            {
                                "desc": "**Required.** The user ID of the leaving member.",
                                "key": "sender",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "**Required.** The name of the resident homeserver.",
                                "key": "origin",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "**Required.** A timestamp added by the resident homeserver.",
                                "key": "origin_server_ts",
                                "required": true,
                                "title": "integer"
                            },
                            {
                                "desc": "**Required.** The value ``m.room.member``.",
                                "key": "type",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "**Required.** The user ID of the leaving member.",
                                "key": "state_key",
                                "required": true,
                                "title": "string"
                            },
                            {
                                "desc": "**Required.** The content of the event.",
                                "key": "content",
                                "required": true,
                                "title": "Membership Event Content"
                            }
                        ]
                    ],
                    [
                        "Membership Event Content",
                        null,
                        [
                            {
                                "desc": "**Required.** The value ``leave``.",
                                "key": "membership",
                                "required": true,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "A template to be used to call ``/send_leave``. Note that\nevents have a different format depending on the room version - check the\n`room version specification`_ for precise event formats. **The response body\nhere describes the common event fields in more detail and may be missing other\nrequired fields for a PDU.**",
                        "example": "{\n  \"room_version\": \"2\",\n  \"event\": {\n    \"type\": \"m.room.member\",\n    \"room_id\": \"!somewhere:example.org\",\n    \"content\": {\n      \"membership\": \"leave\"\n    },\n    \"state_key\": \"@someone:example.org\",\n    \"origin\": \"example.org\",\n    \"origin_server_ts\": 1549041175876,\n    \"sender\": \"@someone:example.org\"\n  }\n}"
                    },
                    {
                        "code": 403,
                        "description": "The request is not authorized. This could mean that the user is not in the room.",
                        "example": "{\n  \"errcode\": \"M_FORBIDDEN\",\n  \"error\": \"User is not in the room.\"\n}"
                    }
                ],
                "title": "Get information required to make a leave event for a room"
            },
            {
                "deprecated": false,
                "desc": ".. Note::\n   Servers should instead prefer to use the v2 ``/send_leave``\n   endpoint.\n\nSubmits a signed leave event to the resident server for it\nto accept it into the room's graph. Note that events have\na different format depending on the room version - check\nthe `room version specification`_ for precise event formats.\n**The request and response body here describe the common\nevent fields in more detail and may be missing other required\nfields for a PDU.**",
                "example": {
                    "req": "PUT /_matrix/federation/v1/send_leave/%21abc123%3Amatrix.org/%24abc123%3Aexample.org HTTP/1.1\nContent-Type: application/json\n\n{\n  \"sender\": \"@someone:example.org\",\n  \"origin\": \"matrix.org\",\n  \"origin_server_ts\": 1234567890,\n  \"type\": \"m.room.member\",\n  \"state_key\": \"@someone:example.org\",\n  \"content\": {\n    \"membership\": \"leave\"\n  },\n  \"depth\": 12\n}"
                },
                "method": "PUT",
                "path": "/_matrix/federation/v1/send_leave/{roomId}/{eventId}",
                "rate_limited": false,
                "req_body_tables": [
                    [
                        "Membership Event Content",
                        null,
                        [
                            {
                                "desc": "**Required.** The value ``leave``.",
                                "key": "membership",
                                "required": true,
                                "title": "string"
                            }
                        ]
                    ]
                ],
                "req_param_by_loc": {
                    "JSON body": [
                        {
                            "desc": "**Required.** The user ID of the leaving member.",
                            "key": "sender",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The name of the leaving homeserver.",
                            "key": "origin",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** A timestamp added by the leaving homeserver.",
                            "key": "origin_server_ts",
                            "required": true,
                            "title": "integer"
                        },
                        {
                            "desc": "**Required.** The value ``m.room.member``.",
                            "key": "type",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The user ID of the leaving member.",
                            "key": "state_key",
                            "required": true,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The content of the event.",
                            "key": "content",
                            "required": true,
                            "title": "Membership Event Content"
                        },
                        {
                            "desc": "**Required.** This field must be present but is ignored; it may be 0.",
                            "key": "depth",
                            "required": true,
                            "title": "integer"
                        }
                    ],
                    "path": [
                        {
                            "desc": "**Required.** The room ID that is about to be left.",
                            "key": "roomId",
                            "required": false,
                            "title": "string"
                        },
                        {
                            "desc": "**Required.** The event ID for the leave event.",
                            "key": "eventId",
                            "required": false,
                            "title": "string"
                        }
                    ]
                },
                "requires_auth": true,
                "res_headers": null,
                "res_tables": [
                    [
                        null,
                        null,
                        [
                            {
                                "desc": "",
                                "key": "<body>",
                                "required": false,
                                "title": "[integer, Empty Object]"
                            }
                        ]
                    ]
                ],
                "responses": [
                    {
                        "code": 200,
                        "description": "An empty response to indicate the event was accepted into the graph by\nthe receiving homeserver.",
                        "example": "[\n  200,\n  {}\n]"
                    }
                ],
                "title": "Submit a signed leave event to a resident server"
            }
        ],
        "group": "leaving_v1_ss"
    },
    "basePath": "/_matrix/federation/v1",
    "consumes": [
        "application/json"
    ],
    "host": "localhost:8448",
    "info": {
        "title": "Matrix Federation Leave Room API",
        "version": "1.0.0"
    },
    "paths": {
        "/make_leave/{roomId}/{userId}": {
            "get": {
                "description": "Asks the receiving server to return information that the sending\nserver will need to prepare a leave event to get out of the room.",
                "operationId": "makeLeave",
                "parameters": [
                    {
                        "description": "The room ID that is about to be left.",
                        "in": "path",
                        "name": "roomId",
                        "required": true,
                        "type": "string",
                        "x-example": "!abc123:matrix.org"
                    },
                    {
                        "description": "The user ID the leave event will be for.",
                        "in": "path",
                        "name": "userId",
                        "required": true,
                        "type": "string",
                        "x-example": "@someone:example.org"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "A template to be used to call ``/send_leave``. Note that\nevents have a different format depending on the room version - check the\n`room version specification`_ for precise event formats. **The response body\nhere describes the common event fields in more detail and may be missing other\nrequired fields for a PDU.**",
                        "examples": {
                            "application/json": {
                                "event": {
                                    "content": {
                                        "membership": "leave"
                                    },
                                    "origin": "example.org",
                                    "origin_server_ts": 1549041175876,
                                    "room_id": "!somewhere:example.org",
                                    "sender": "@someone:example.org",
                                    "state_key": "@someone:example.org",
                                    "type": "m.room.member"
                                },
                                "room_version": "2"
                            }
                        },
                        "schema": {
                            "properties": {
                                "event": {
                                    "description": "An unsigned template event. Note that events have a different format\ndepending on the room version - check the `room version specification`_\nfor precise event formats.",
                                    "properties": {
                                        "content": {
                                            "description": "The content of the event.",
                                            "example": {
                                                "membership": "leave"
                                            },
                                            "properties": {
                                                "membership": {
                                                    "description": "The value ``leave``.",
                                                    "example": "leave",
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "membership"
                                            ],
                                            "title": "Membership Event Content",
                                            "type": "object"
                                        },
                                        "origin": {
                                            "description": "The name of the resident homeserver.",
                                            "example": "matrix.org",
                                            "type": "string"
                                        },
                                        "origin_server_ts": {
                                            "description": "A timestamp added by the resident homeserver.",
                                            "example": 1234567890,
                                            "format": "int64",
                                            "type": "integer"
                                        },
                                        "sender": {
                                            "description": "The user ID of the leaving member.",
                                            "example": "@someone:example.org",
                                            "type": "string"
                                        },
                                        "state_key": {
                                            "description": "The user ID of the leaving member.",
                                            "example": "@someone:example.org",
                                            "type": "string"
                                        },
                                        "type": {
                                            "description": "The value ``m.room.member``.",
                                            "example": "m.room.member",
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "state_key",
                                        "sender",
                                        "origin",
                                        "origin_server_ts",
                                        "type",
                                        "content"
                                    ],
                                    "title": "Event Template",
                                    "type": "object"
                                },
                                "room_version": {
                                    "description": "The version of the room where the server is trying to leave. If not provided,\nthe room version is assumed to be either \"1\" or \"2\".",
                                    "example": "2",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "403": {
                        "description": "The request is not authorized. This could mean that the user is not in the room.",
                        "examples": {
                            "application/json": {
                                "errcode": "M_FORBIDDEN",
                                "error": "User is not in the room."
                            }
                        },
                        "schema": {
                            "description": "A Matrix-level Error",
                            "properties": {
                                "errcode": {
                                    "description": "An error code.",
                                    "example": "M_UNKNOWN",
                                    "type": "string"
                                },
                                "error": {
                                    "description": "A human-readable error message.",
                                    "example": "An unknown error occurred",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "errcode"
                            ],
                            "type": "object"
                        }
                    }
                },
                "security": [
                    {
                        "signedRequest": []
                    }
                ],
                "summary": "Get information required to make a leave event for a room"
            }
        },
        "/send_leave/{roomId}/{eventId}": {
            "put": {
                "description": ".. Note::\n   Servers should instead prefer to use the v2 ``/send_leave``\n   endpoint.\n\nSubmits a signed leave event to the resident server for it\nto accept it into the room's graph. Note that events have\na different format depending on the room version - check\nthe `room version specification`_ for precise event formats.\n**The request and response body here describe the common\nevent fields in more detail and may be missing other required\nfields for a PDU.**",
                "operationId": "sendLeaveV1",
                "parameters": [
                    {
                        "description": "The room ID that is about to be left.",
                        "in": "path",
                        "name": "roomId",
                        "required": true,
                        "type": "string",
                        "x-example": "!abc123:matrix.org"
                    },
                    {
                        "description": "The event ID for the leave event.",
                        "in": "path",
                        "name": "eventId",
                        "required": true,
                        "type": "string",
                        "x-example": "$abc123:example.org"
                    },
                    {
                        "example": {
                            "content": {
                                "membership": "leave"
                            },
                            "origin": "example.org",
                            "origin_server_ts": 1549041175876,
                            "room_id": "!somewhere:example.org",
                            "sender": "@someone:example.org",
                            "state_key": "@someone:example.org",
                            "type": "m.room.member"
                        },
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "properties": {
                                "content": {
                                    "description": "The content of the event.",
                                    "example": {
                                        "membership": "leave"
                                    },
                                    "properties": {
                                        "membership": {
                                            "description": "The value ``leave``.",
                                            "example": "leave",
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "membership"
                                    ],
                                    "title": "Membership Event Content",
                                    "type": "object"
                                },
                                "depth": {
                                    "description": "This field must be present but is ignored; it may be 0.",
                                    "example": 12,
                                    "type": "integer"
                                },
                                "origin": {
                                    "description": "The name of the leaving homeserver.",
                                    "example": "matrix.org",
                                    "type": "string"
                                },
                                "origin_server_ts": {
                                    "description": "A timestamp added by the leaving homeserver.",
                                    "example": 1234567890,
                                    "format": "int64",
                                    "type": "integer"
                                },
                                "sender": {
                                    "description": "The user ID of the leaving member.",
                                    "example": "@someone:example.org",
                                    "type": "string"
                                },
                                "state_key": {
                                    "description": "The user ID of the leaving member.",
                                    "example": "@someone:example.org",
                                    "type": "string"
                                },
                                "type": {
                                    "description": "The value ``m.room.member``.",
                                    "example": "m.room.member",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "state_key",
                                "sender",
                                "origin",
                                "origin_server_ts",
                                "type",
                                "depth",
                                "content"
                            ],
                            "type": "object"
                        },
                        "type": "object"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "An empty response to indicate the event was accepted into the graph by\nthe receiving homeserver.",
                        "examples": {
                            "application/json": [
                                200,
                                {}
                            ]
                        },
                        "schema": {
                            "items": [
                                {
                                    "description": "The value ``200``.",
                                    "example": 200,
                                    "type": "integer"
                                },
                                {
                                    "description": "An empty object.",
                                    "title": "Empty Object",
                                    "type": "object"
                                }
                            ],
                            "maxItems": 2,
                            "minItems": 2,
                            "type": "array"
                        }
                    }
                },
                "security": [
                    {
                        "signedRequest": []
                    }
                ],
                "summary": "Submit a signed leave event to a resident server"
            }
        }
    },
    "produces": [
        "application/json"
    ],
    "schemes": [
        "https"
    ],
    "securityDefinitions": {
        "signedRequest": {
            "description": "The ``Authorization`` header defined in the `Authentication`_ section.",
            "in": "header",
            "name": "Authorization",
            "type": "apiKey"
        }
    },
    "swagger": "2.0"
}