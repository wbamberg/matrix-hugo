{{ $responses := .responses }}
{{ $path := .path }}
{{ $base_data := .base_data }}

<h2>Responses</h2>

<table class>
 <thead>
  <td class="col-status">Status</td>
  <td class="col-status-description">Description</td>
 </thead>

{{ range $code, $response := $responses }}

 <tr>
  <td><code>{{ $code }}</code></td>
  <td>{{ $response.description | markdownify }}</td>
 </tr>

{{ end }}

</table>

{{ $ok := index $responses "200" }}
{{ if $ok.schema }}

    {{ $schema := partial "openapi/resolvers/resolve-refs" (dict "schema" $ok.schema "path" $path "base_data" $base_data) }}
    {{ $schema := partial "openapi/resolvers/resolve-allof" $schema }}

    {{ if or $schema.properties (eq $schema.type "array") }}
<h3>200 response body</h3>

        {{ if eq $schema.type "array" }}
<p>Array of <code>{{ $schema.items.title }}</code>.</p>
        {{ end }}

        {{ $additional_types := partial "openapi/resolvers/resolve-additional-types" $schema }}
        {{ $additional_types = uniq $additional_types }}
        {{ range $additional_types }}
          {{ partial "openapi/renderers/render-object-table" (dict "caption" .title "properties" .properties "required" .required) }}
        {{ end }}

<h3>200 response body example</h3>
        {{ $example := partial "openapi/resolvers/resolve-example" $schema }}
        {{ if $ok.examples }}
            {{ $example = partial "openapi/resolvers/resolve-refs" (dict "schema" $ok.examples "path" $path "base_data" $base_data) }}
            {{ $example = index $example "application/json" }}
        {{ end }}

```json
{{ jsonify (dict "indent" "  ") $example }}
```

    {{ end }}
{{ end }}
